(function(e){function t(t){for(var i,r,o=t[0],l=t[1],h=t[2],c=0,u=[];c<o.length;c++)r=o[c],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&u.push(s[r][0]),s[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);m&&m(t);while(u.length)u.shift()();return n.push.apply(n,h||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],i=!0,r=1;r<a.length;r++){var o=a[r];0!==s[o]&&(i=!1)}i&&(n.splice(t--,1),e=h(h.s=a[0]))}return e}var i={},s={app:0},n=[];function r(e){return h.p+"js/"+({about:"about"}[e]||e)+"."+{about:"544a7823","chunk-76fd9eda":"886d1d02"}[e]+".js"}var o={};var l={f87f:function(){return{"./putnam_github_io_bg.js":{__wbindgen_json_serialize:function(e,t){return i["675b"].exports["__wbindgen_json_serialize"](e,t)},__wbg_new_59cb74e423758ede:function(){return i["675b"].exports["__wbg_new_59cb74e423758ede"]()},__wbg_stack_558ba5917b466edd:function(e,t){return i["675b"].exports["__wbg_stack_558ba5917b466edd"](e,t)},__wbg_error_4bb6c2a97407129a:function(e,t){return i["675b"].exports["__wbg_error_4bb6c2a97407129a"](e,t)},__wbindgen_object_drop_ref:function(e){return i["675b"].exports["__wbindgen_object_drop_ref"](e)},__wbg_getRandomValues_98117e9a7e993920:function(e,t){return i["675b"].exports["__wbg_getRandomValues_98117e9a7e993920"](e,t)},__wbg_randomFillSync_64cc7d048f228ca8:function(e,t,a){return i["675b"].exports["__wbg_randomFillSync_64cc7d048f228ca8"](e,t,a)},__wbg_process_2f24d6544ea7b200:function(e){return i["675b"].exports["__wbg_process_2f24d6544ea7b200"](e)},__wbindgen_is_object:function(e){return i["675b"].exports["__wbindgen_is_object"](e)},__wbg_versions_6164651e75405d4a:function(e){return i["675b"].exports["__wbg_versions_6164651e75405d4a"](e)},__wbg_node_4b517d861cbcb3bc:function(e){return i["675b"].exports["__wbg_node_4b517d861cbcb3bc"](e)},__wbg_modulerequire_3440a4bcf44437db:function(e,t){return i["675b"].exports["__wbg_modulerequire_3440a4bcf44437db"](e,t)},__wbg_crypto_98fc271021c7d2ad:function(e){return i["675b"].exports["__wbg_crypto_98fc271021c7d2ad"](e)},__wbg_msCrypto_a2cdb043d2bfe57f:function(e){return i["675b"].exports["__wbg_msCrypto_a2cdb043d2bfe57f"](e)},__wbg_newnoargs_9fdd8f3961dd1bee:function(e,t){return i["675b"].exports["__wbg_newnoargs_9fdd8f3961dd1bee"](e,t)},__wbg_call_ba36642bd901572b:function(e,t){return i["675b"].exports["__wbg_call_ba36642bd901572b"](e,t)},__wbg_self_bb69a836a72ec6e9:function(){return i["675b"].exports["__wbg_self_bb69a836a72ec6e9"]()},__wbg_window_3304fc4b414c9693:function(){return i["675b"].exports["__wbg_window_3304fc4b414c9693"]()},__wbg_globalThis_e0d21cabc6630763:function(){return i["675b"].exports["__wbg_globalThis_e0d21cabc6630763"]()},__wbg_global_8463719227271676:function(){return i["675b"].exports["__wbg_global_8463719227271676"]()},__wbindgen_is_undefined:function(e){return i["675b"].exports["__wbindgen_is_undefined"](e)},__wbg_buffer_9e184d6f785de5ed:function(e){return i["675b"].exports["__wbg_buffer_9e184d6f785de5ed"](e)},__wbg_new_e8101319e4cf95fc:function(e){return i["675b"].exports["__wbg_new_e8101319e4cf95fc"](e)},__wbg_set_e8ae7b27314e8b98:function(e,t,a){return i["675b"].exports["__wbg_set_e8ae7b27314e8b98"](e,t,a)},__wbg_length_2d56cb37075fcfb1:function(e){return i["675b"].exports["__wbg_length_2d56cb37075fcfb1"](e)},__wbg_newwithlength_a8d1dbcbe703a5c6:function(e){return i["675b"].exports["__wbg_newwithlength_a8d1dbcbe703a5c6"](e)},__wbg_subarray_901ede8318da52a6:function(e,t,a){return i["675b"].exports["__wbg_subarray_901ede8318da52a6"](e,t,a)},__wbindgen_object_clone_ref:function(e){return i["675b"].exports["__wbindgen_object_clone_ref"](e)},__wbindgen_is_string:function(e){return i["675b"].exports["__wbindgen_is_string"](e)},__wbindgen_throw:function(e,t){return i["675b"].exports["__wbindgen_throw"](e,t)},__wbindgen_memory:function(){return i["675b"].exports["__wbindgen_memory"]()}}}}};function h(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,h),a.l=!0,a.exports}h.e=function(e){var t=[],a=s[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise((function(t,i){a=s[e]=[t,i]}));t.push(a[2]=i);var n,c=document.createElement("script");c.charset="utf-8",c.timeout=120,h.nc&&c.setAttribute("nonce",h.nc),c.src=r(e);var u=new Error;n=function(t){c.onerror=c.onload=null,clearTimeout(d);var a=s[e];if(0!==a){if(a){var i=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+i+": "+n+")",u.name="ChunkLoadError",u.type=i,u.request=n,a[1](u)}s[e]=void 0}};var d=setTimeout((function(){n({type:"timeout",target:c})}),12e4);c.onerror=c.onload=n,document.head.appendChild(c)}var m={"chunk-76fd9eda":["f87f"]}[e]||[];return m.forEach((function(e){var a=o[e];if(a)t.push(a);else{var i,s=l[e](),n=fetch(h.p+""+{f87f:"cf15f3dd2aad92d0c25c"}[e]+".module.wasm");if(s instanceof Promise&&"function"===typeof WebAssembly.compileStreaming)i=Promise.all([WebAssembly.compileStreaming(n),s]).then((function(e){return WebAssembly.instantiate(e[0],e[1])}));else if("function"===typeof WebAssembly.instantiateStreaming)i=WebAssembly.instantiateStreaming(n,s);else{var r=n.then((function(e){return e.arrayBuffer()}));i=r.then((function(e){return WebAssembly.instantiate(e,s)}))}t.push(o[e]=i.then((function(t){return h.w[e]=(t.instance||t).exports})))}})),Promise.all(t)},h.m=e,h.c=i,h.d=function(e,t,a){h.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},h.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},h.t=function(e,t){if(1&t&&(e=h(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(h.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)h.d(a,i,function(t){return e[t]}.bind(null,i));return a},h.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return h.d(t,"a",t),t},h.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},h.p="/",h.oe=function(e){throw console.error(e),e},h.w={};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var m=u;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0998":function(e,t,a){e.exports=a.p+"media/Excited.42279c1a.mp4"},"41d0":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),s=(a("41d0"),a("5f5b"));a("ab8b"),a("2dd8");i["default"].use(s["a"]);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dark",attrs:{id:"app"}},[a("div",{attrs:{id:"nav"}},[a("router-link",{attrs:{to:"/"}},[e._v("Home")]),e._v(" | "),a("router-link",{attrs:{to:"/about"}},[e._v("About")]),e._v(" | "),a("router-link",{attrs:{to:"/helper"}},[e._v("DF material helper")]),e._v(" | "),a("router-link",{attrs:{to:"/roguelike"}},[e._v("Roguelike?")])],1),a("router-view")],1)},r=[],o=(a("5c0b"),a("2877")),l={},h=Object(o["a"])(l,n,r,!1,null,null,null),c=h.exports,u=(a("d3b7"),a("3ca3"),a("ddb0"),a("8c4f")),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",{attrs:{fluid:""}},[a("b-row",{attrs:{"no-gutters":""}},[a("b-col",[a("b-card",[a("b-card-title",[e._v(" Open source projects ")]),a("b-card-sub-title",[e._v(" Programming projects worth "),a("i",[e._v("something")]),e._v(". ")]),a("work-entry",{attrs:{name:"Auxmos",href:"https://github.com/Putnam3145/auxmos",blurb:"Multithreaded atmospherics plugin for BYOND"}},[e._v(" A total rewrite of Space Station 13's atmospherics in Rust. Multithreaded, with a lot of experiments thereof in the branches. Most of my time with it has been spent on algorithmic improvements. It performs very well, though the integration has been somewhat painful, helped along greatly by the fact that Auxtools, the library it's based on, is quite robust. Overall, the project is very fun for me, and, while some of the more monolithic functions in it horrify me, I still enjoy programming it and learning new things in the process. "),a("b-link",{attrs:{to:"atmospherics"}},[e._v("Here's a significantly more in-depth look at it, including the history of SS13's atmos.")])],1),a("work-entry",{attrs:{name:"Janet-D",href:"https://github.com/Putnam3145/janet-d",blurb:"Template-based bindings for a lisp-like"}},[e._v(" A high-level interface to the "),a("b-link",{attrs:{href:"https://janet-lang.org/"}},[e._v("Janet scripting language")]),e._v(" for "),a("b-link",{attrs:{href:"https://dlang.org/"}},[e._v("D")]),e._v(". I primarily wrote this because I like D and don't particularly like Lua, so I was desparate to find another scripting language to work with. It's gone onto the backburner somewhat due to a combination of low interest and low demand, but it was and is very fun to make. ")],1),a("work-entry",{attrs:{name:"Dhatetris",href:"https://github.com/Putnam3145/dhatetris",blurb:"Hatetris TGM"}},[e._v(" A more standards-compliant version of qntm's "),a("b-link",{attrs:{href:"https://qntm.org/hatetris"}},[e._v("Hatetris")]),e._v(", whose "),a("b-link",{attrs:{href:"https://qntm.org/self"}},[e._v("Javascript love")]),e._v(" I can respect but cannot agree with. The primary differences between the original hatetris and this one are, first, that mine goes a few levels deep using an inverse-minimax algorithm to try to find the most pessimal move a few moves ahead in parallel; second, that mine controls more like the usual standards, with T-spins, wall kicks, holds and so on. Primarily I wanted to do some OpenGL. Unfortunately, the library I was using had only compatibility with OpenGL 2, so I didn't really learn much useful. ")],1),a("work-entry",{attrs:{name:"Misc. D modules",href:"https://github.com/Putnam3145/D-modules",blurb:"Higher-dimensional algebra, mostly"}},[e._v(" A few D modules I've made: a template that implements the "),a("b-link",{attrs:{href:"https://en.wikipedia.org/wiki/Cayley%E2%80%93Dickson_construction"}},[e._v("Cayley-Dickson construction")]),e._v(" over the complex numbers and beyond (the template aliases itself to complex numbers at low enough recursion), a manual implementation of quaternions, and a wrapper around an arbitrary value that lets you set that value using a function called entirely in a separate thread. That last one was made when I was pretty naive with threading, so, go easy on it. ")],1),a("work-entry",{attrs:{name:"DF material helper",href:"https://putnam3145.github.io/helper",blurb:"Educational modding tool"}},[e._v(" I love Dwarf Fortress, and it's sparked a mild enthusiasm in me of many subjects. This is the product of one such minor enthusiasm. This is a little online widget that helps guide you through the creation of a modded material in Dwarf Fortress, providing the physical and gameplay ramifications of various material properties. Perhaps my favorite part is the elasticity page, which uses various real properties of materials Dwarf Fortress itself doesn't quite get to, and includes an embed to an interactive graph showing how the poisson ratio can be seen as a constrained proportionality constant between the elastic moduli in isotropic homogenous materials. ")])],1)],1),a("b-col",[a("b-card",[a("b-card-title",[e._v(" Dwarf Fortress mods ")]),a("b-card-sub-title",[e._v(" How I got started. ")]),a("work-entry",{attrs:{name:"Fortbent",href:"http://www.bay12forums.com/smf/index.php?topic=89267.0",blurb:"Homestuck mod, oh no!"}},[e._v(" My first ever programming project, unfortunately. Also grew outside of scope, so hard that unlike the DBZ mod I no longer find myself able to support it. Features a new relationship system built by hacking on top of Dwarf Fortress's, a new in-game semi-economy based on goings-on elsewhere in your fortress's civilization, 144 hand-coded class/aspect combos (this was a mistake), procedurally generated combination attacks based on each of those (also a mistake), and an entire custom skills system built to support this, all in Lua. One may figure out why I said I dislike Lua. ")]),a("work-entry",{attrs:{name:"SCP",href:"http://www.bay12forums.com/smf/index.php?topic=105645.0",blurb:"SCP wiki mod"}},[e._v(" Less a mod and more a series of tech demos. Demonstration of Dwarf Fortress's unused multiple-souls vector with Dr. Bright; the robustness of Dwarf Fortress's materials system with SCP-294; demonstration of how complicated behavior can be replicated with mere interactions with SCP-173; and so on and so forth. Had the beginnings of a more \"management-sim\" like system in the form of \"trust points\" that can be gained by successfully containing SCPs and spent on equipment, safer SCPs etc., but I eventually decided that if I'm going to make an SCP management sim, I'd be better of making it standalone. I haven't, primarily because the idea doesn't actually interest me that much. ")]),a("work-entry",{attrs:{name:"Sparking",href:"http://www.bay12forums.com/smf/index.php?topic=100799.0",blurb:"Dragon Ball mod, what?"}},[e._v(" A Dragon Ball Z mod that I started when I was 17 and got waaaaaay beyond the originally planned scope. Has a fully-featured transformations system built on top of another fully-featured ki system, both written in Lua using DFHack. One may notice a pattern. The main reason this has lasted so long for me is specifically because of how much I enjoy implementing new ideas and techniques I've learned about: for a very long time, whenever I would think up a new way to interact with Dwarf Fortress, this mod is where I would do it. The overall effect is a mod that is terrifyingly fully-featured and thought-out for me; it doesn't help that I actually play it. ")]),a("work-entry",{attrs:{name:"Fantastic",href:"http://www.bay12forums.com/smf/index.php?topic=150752.0",blurb:"Mini-mods"}},[e._v(" I just throw whatever minor things I make into this mod pack whenever I make them. Primary feature is Materials+, which used an older version of the above material helper to implement nearly every metal on the periodic table, with reasonably accurate features. Bit of a silly mod: molybdenum short swords abound. Depending on how the steam release goes, I'm likely to break this into many smaller releases. ")])],1)],1),a("b-col",[a("b-card",[a("b-card-title",[e._v(" Contributions ")]),a("b-card-sub-title",[e._v(" Contributing is as important as creating ")]),a("b-modal",{attrs:{id:"cit_warn","body-bg-variant":"dark","body-text-variant":"light","header-border-variant":"dark","footer-border-variant":"dark","footer-bg-variant":"warning","header-bg-variant":"dark","header-text-variant":"light"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("b-button",{attrs:{variant:"success"},on:{click:function(t){return e.$bvModal.hide("cit_warn")}}},[e._v("No")]),a("b-button",{attrs:{variant:"danger",href:"https://github.com/Citadel-Station-13/Citadel-Station-13"}},[e._v("Yes")])]},proxy:!0}])},[e._v(" Repository contains NSFW content. Are you sure? ")]),a("work-entry",{attrs:{name:"Space Station 13",href:"https://spacestation13.com/",blurb:"Before Among Us and Dwarf Fortress, there was this"}},[e._v(" A simulationist social deduction game. I'm a maintainer for the "),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.cit_warn",modifiers:{cit_warn:!0}}],attrs:{variant:"link"}},[e._v("Citadel Station 13 fork.")]),e._v(' Actual programming work done includes overhauling the "dynamic" game mode to be more responsive to changes in game state, a '),a("b-link",{attrs:{href:"https://github.com/Putnam3145/extools"}},[e._v("port of C++-implemented atmospherics")]),e._v(", the aforementioned auxmos and optimization of NSFW game systems that it seems nobody else could tolerate dealing with. ")],1),a("work-entry",{attrs:{name:"DFHack",href:"https://github.com/DFHack/dfhack",blurb:"Memory hacking library for Dwarf Fortress"}},[e._v(' A high-level memory hacking library for Dwarf Fortress. All of the mods on this page use it extensively. I\'ve contributed various scripts and occasional data structure research to it. My excessive use of DFHack in modding eventually made me come to the realization that it\'s less "modding" that I enjoy and more "creating systems that interact with existing systems", which is why I\'m a Space Station 13 maintainer now. ')]),a("work-entry",{attrs:{name:"Auxtools",href:"https://github.com/willox/auxtools",blurb:"External tools for BYOND"}},[e._v(" In somewhat of the same vein as DFHack. A Rust-based project that hooks into BYOND's internals, allowing access to many of its features from within a Rust program. Used to make auxmos. I've personally contributed a few bugfixes and features to it, including the methods for accessing turf tiles. ")])],1)],1)],1)],1)},m=[],p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-card",[a("b-card-title",[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle:[name]",arg:e.name}],attrs:{block:"",variant:"primary"}},[e._v(e._s(e.name))])],1),a("b-card-sub-title",[e._v(" "+e._s(e.blurb)+" ")]),a("b-collapse",{attrs:{id:e.name}},[a("b-card-text",[e._t("default")],2),a("b-card-footer",[a("b-link",{attrs:{href:e.href}},[e._v("Link")])],1)],1)],1)},f=[],b={props:{name:String,href:String,blurb:String}},g=b,_=Object(o["a"])(g,p,f,!1,null,null,null),v=_.exports,y={name:"Home",components:{WorkEntry:v}},w=y,k=Object(o["a"])(w,d,m,!1,null,null,null),x=k.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{attrs:{cols:"8"}},[a("b-tabs",{attrs:{pills:"",vertical:"",card:""},model:{value:e.curTab,callback:function(t){e.curTab=t},expression:"curTab"}},[a("b-tab",{attrs:{title:"Game"}},[a("div",{staticClass:"input_category tab_content",staticStyle:{"grid-template-rows":"repeat(2,min-content)"}},[a("token",{attrs:{token:"STATE_NAME",description:"The material's noun.",placeholder:"iron"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[e._v(' Like "piles of '+e._s(e.name)+"\". If this is the same as ADJ, it'll automatically use STATE_NAME_ADJ instead. ")]),a("token",{attrs:{token:"STATE_ADJ",description:"The material's adjective.",placeholder:"iron"},model:{value:e.adj,callback:function(t){e.adj=t},expression:"adj"}},[e._v(' Like "'+e._s(e.adj)+" long sword\". If this is the same as NAME, it'll automatically use STATE_NAME_ADJ instead. ")]),a("token",{attrs:{token:"COLOR",description:"The material's color. Used in graphics as of steam release.",placeholder:"GRAY"},model:{value:e.color,callback:function(t){e.color=t},expression:"color"}},[e._v(" A list of tokens is available "),a("b-link",{attrs:{href:"https://dwarffortresswiki.org/index.php/DF2014:Color#Color_tokens"}},[e._v("here.")]),e._v(" I would have a drop-down with every color, but then I'd have to make a little raw parser so you can add your own arbitrarily, and so on. Horrible. ")],1),a("token",{attrs:{type:"number",number:"",token:"MAT_VALUE",description:"Item values are multiplied by this.",placeholder:"10"},model:{value:e.matValue,callback:function(t){e.matValue=e._n(t)},expression:"matValue"}},[e._v(" You can actually set this to a negative number, forcing others to pay you to take your garbage away. Fun facts. ")])],1)]),a("b-tab",{attrs:{title:"Thermal"}},[a("b-container",[a("b-row",[a("temperature-input",{attrs:{exists:e.melting_exists,name:"Melting point",id:"MELTING_POINT",description:"The temperature at which this material becomes a liquid.",optional:""},on:{"update:exists":function(t){e.melting_exists=t}},model:{value:e.melting,callback:function(t){e.melting=t},expression:"melting"}},[e._v(" There's no special conditions that need to happen for melting. I've had materials I expected to be liquid freeze underground and thus be unusable. Keep these things in mind! ")]),a("temperature-input",{attrs:{exists:e.boiling_exists,name:"Boiling point",id:"BOILING_POINT",description:"The temperature at which this material becomes a gas.",optional:""},on:{"update:exists":function(t){e.boiling_exists=t}},model:{value:e.boiling,callback:function(t){e.boiling=t},expression:"boiling"}},[e._v(" If you set this very low, an object of this material can still be made in reactions, but it'll boil instantly. Very useful for reactions. ")])],1),a("b-row",[a("temperature-input",{attrs:{exists:e.heatdam_exists,name:"Heat damage point",id:"HEATDAM_POINT",description:"Above this temperature, any item made of this material starts taking damage.",optional:"",disabled:""},on:{"update:exists":function(t){e.heatdam_exists=t}},model:{value:e.heatdam,callback:function(t){e.heatdam=t},expression:"heatdam"}},[e._v(" Damage is tattering etc. This token is underused, I think. ")]),a("temperature-input",{attrs:{exists:e.colddam_exists,name:"Cold damage point",id:"COLDDAM_POINT",description:"Below this temperature, any item made of this material starts taking damage.",optional:"",disabled:""},on:{"update:exists":function(t){e.colddam_exists=t}},model:{value:e.colddam,callback:function(t){e.colddam=t},expression:"colddam"}},[e._v(" Damage is tattering etc. This token is underused, I think. ")])],1),a("b-row",[a("temperature-input",{attrs:{exists:e.ignition_exists,name:"Ignition point",id:"IGNITION_POINT",description:"Above this temperature, items made of this material catch fire.",optional:"",disabled:""},on:{"update:exists":function(t){e.ignition_exists=t}},model:{value:e.ignition,callback:function(t){e.ignition=t},expression:"ignition"}},[e._v(" If you don't set a heatdam point along with this, you'll end up having perma-fires. ")])],1),a("b-row",[a("token",{attrs:{type:"number",number:"",token:"SPEC_HEAT",description:"The specific heat capacity, in J/kg-K.",placeholder:"450",href:"https://en.wikipedia.org/wiki/Specific_heat_capacity",name:"Specific heat capacity",complex:""},scopedSlots:e._u([{key:"dwarf",fn:function(){return[e._v(' Temperature is stored as a fixed-point number and this is the denominator of the fractional part. In other words, the "minimum temperature unit" of a material is 1/SPEC_HEAT. When an object of one temperature interfaces with another, the whole parts of the temperatures are compared, A-B, and then each material\'s "minimum temperature unit" is incremented by this value. Below is a simulator for this process: it uses the same process (with floats instead of fixed-points, mind) and works as fast as Dwarf Fortress\'s default speed. '),a("heat-sim",{attrs:{specHeat:e.specHeat}})]},proxy:!0},{key:"science",fn:function(){return[e._v(" This is how much heat it takes to increase a kilogram of material by one kelvin. The most familiar example is water, whose value in DF's units is 4184. The calorie is a unit of energy based on water's heat capacity, so don't get confused about that. Water's heat capacity is 1 calorie/gram-kelvin, or 1000 calories/kilogram-kelvin, or 4184 Joules/kilogram-kelvin. ")]},proxy:!0}]),model:{value:e.specHeat,callback:function(t){e.specHeat=e._n(t)},expression:"specHeat"}})],1)],1)],1),a("b-tab",{attrs:{title:"Mass"}},[a("div",{staticClass:"tab_content input_category"},[a("b-form-row",[a("token",{attrs:{type:"number",number:"",token:"SOLID_DENSITY",description:"The density of the material when solid, in kilograms/meter^3.",placeholder:"7850"},model:{value:e.solidDensity,callback:function(t){e.solidDensity=e._n(t)},expression:"solidDensity"}},[e._v(" This is actually one of the more important stats, for blunt weapons, ammo and, surprisingly, armor. Armor of sufficient density can stop low-momentum attacks cold. For ammo, there's a max velocity weapons can fire at and a max force, so there's a maximum density that matters. For crossbows, this is 1666, which is hilariously low, only mattering for wood ammunition and adamantine, which is so sharp and strong it doesn't even matter. ")]),a("token",{attrs:{type:"number",number:"",token:"LIQUID_DENSITY",description:"The density of the material when liquid.",placeholder:"6980"},model:{value:e.liquidDensity,callback:function(t){e.liquidDensity=e._n(t)},expression:"liquidDensity"}},[e._v(" This only matters for hauling. ")])],1),a("token",{attrs:{type:"number",number:"",token:"MOLAR_MASS",description:"The molar mass of this material, in kilograms/mol.",placeholder:"55485",complex:"",href:"https://en.wikipedia.org/wiki/Molar_mass",name:"Molar mass"},scopedSlots:e._u([{key:"dwarf",fn:function(){return[e._v(" Last I checked, even Toady seems somewhat baffled as to the provenance of this token. It's mostly only important for computational fluid dynamics--the specific gas constant is "),a("katex-element",{attrs:{expression:"\\frac{R}{M}"}}),e._v(", where R is the "),a("b-link",{attrs:{href:"https://en.wikipedia.org/wiki/Gas_constant"}},[e._v("gas constant")]),e._v(" and M is the molar mass, and this is important for, say, force calculations for moving air, but Dwarf Fortress just doesn't have any of that. ")]},proxy:!0},{key:"science",fn:function(){return[e._v(" This is simply the mass of a mole of material. This is important not only in computational fluid dynamics, but in chemistry--you probably want to measure your reagents by moles rather than by mass for stoichiometry purposes. Of course, all reactions in DF are custom-coded in the raws, and this is unlikely to change any time soon (although it is possible it will change eventually). ")]},proxy:!0}]),model:{value:e.molarMass,callback:function(t){e.molarMass=e._n(t)},expression:"molarMass"}})],1)]),a("b-tab",{attrs:{title:"Strength"}},[a("b-container",[a("b-row",[a("b-button-group",[a("b-button",{attrs:{variant:"primary"},on:{click:e.strengthPlaceholders}},[e._v("Use standard DF placeholders")]),a("b-button",{attrs:{variant:"primary"},on:{click:e.realisticPlaceholders}},[e._v("Use engineering placeholders")]),a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.strengthPlaceholder",modifiers:{strengthPlaceholder:!0}}],attrs:{variant:"info"}},[e._v("?")])],1),a("b-collapse",{attrs:{id:"strengthPlaceholder"}},[a("p",[e._v("The former just sets shear yield to tensile yield, compressive yield to 3.5x shear yield and fractures to double yield.")]),a("p",[e._v("The latter instead sets shear yield to "),a("katex-element",{attrs:{expression:"\\sqrt{\\frac{1}{3}}"}}),e._v(" tensile yield, but does the rest the same, "),a("b-link",{attrs:{href:"https://en.wikipedia.org/wiki/Shear_strength#Comparison"}},[e._v("as engineers apparently do sometimes.")])],1)])],1),a("b-form-row",[a("token",{attrs:{type:"number",number:"",token:"TENSILE_YIELD",description:"The tension at which this material no longer bounces back when stretched.",complex:"",name:"Tensile yield strength",href:"https://en.wikipedia.org/wiki/Yield_(engineering)",placeholder:"155000"},scopedSlots:e._u([{key:"dwarf",fn:function(){return[e._v(" Only matters for latched-on edged creature attacks--so, bites. Higher is better. ")]},proxy:!0},{key:"science",fn:function(){return[e._v(" This is the pressure above which a material being pulled on from both sides won't go back to its original length when the pulling stops. It's often of much greater import than treated in DF. ")]},proxy:!0}]),model:{value:e.tensileYield,callback:function(t){e.tensileYield=e._n(t)},expression:"tensileYield"}}),a("token",{attrs:{type:"number",number:"",token:"TENSILE_FRACTURE",description:"The tension at which this material will tear when stretched.",placeholder:"310000",complex:"",name:"Tensile strength",href:"https://en.wikipedia.org/wiki/Ultimate_tensile_strength"},scopedSlots:e._u([{key:"dwarf",fn:function(){return[e._v(" Basically the same as TENSILE_YIELD, though probably more important in its (pretty small) niche. ")]},proxy:!0},{key:"science",fn:function(){return[e._v(' This represents the pressure at which a material breaks when pulled on. This is actually usually treated as incredibly important in engineering--this is often called "ultimate strength" in real life, even omitting the "tensile" part. There\'s even an important derived quantity, "specific strength", which '),a("katex-element",{attrs:{expression:"\\frac{T_s}{\\rho}"}}),e._v(", where "),a("katex-element",{attrs:{expression:"T_s"}}),e._v(" is ultimate tensile strength and "),a("katex-element",{attrs:{expression:"\\rho"}}),e._v(" is density. For your material, that's "+e._s(Math.round(e.tensileFracture/(e.solidDensity/1e3))/1e3)+" "),a("katex-element",{attrs:{expression:"\\frac{kN \\cdot m}{kg}"}}),e._v("; compare to steel's 91.72, or adamantine's 25,000 (!), or graphene's 62,453"),a("citation",{attrs:{id:"1"}},[a("b-link",{attrs:{href:"https://en.wikipedia.org/wiki/Specific_strength"}},[e._v('Wikipedia, "Specific Strength"')]),e._v("; cited from "),a("b-link",{attrs:{href:"https://web.archive.org/web/20140328060419/https://www.nobelprize.org/nobel_prizes/physics/laureates/2010/advanced-physicsprize2010.pdf"}},[e._v("the Royal Swedish Academy of Sciences article on the 2010 Nobel laureates,")]),e._v(", which has a section on graphene's strength from which the value was (hopefully) derived via dimensional analysis.")],1)]},proxy:!0}]),model:{value:e.tensileFracture,callback:function(t){e.tensileFracture=e._n(t)},expression:"tensileFracture"}})],1),a("b-form-row",[a("token",{attrs:{type:"number",number:"",token:"SHEAR_YIELD",description:"The stress at which this material no longer bounces back when sheared.",placeholder:"155000",complex:"",name:"Shear yield strength",href:"https://en.wikipedia.org/wiki/Shear_strength"},scopedSlots:e._u([{key:"dwarf",fn:function(){return[e._v(" Technically involved in edged attacks, but since SHEAR_FRACTURE is multiplied by the contact area (which is 5 at the very least) in combat calculations, it doesn't matter except for bolts, and even then only barely. If you mod in ammo or attacks that have a size of 1, this will matter, otherwise not so much. This is also copied to TORSION_YIELD, which is like TENSILE but for blunt attacks that latch... which vanilla DF has none of. ")]},proxy:!0},{key:"science",fn:function(){return[e._v(" This is the "),a("i",[e._v("twisting")]),e._v(" pressure at which a material won't untwist. This can also be derived via "),a("b-link",{attrs:{href:"https://en.wikipedia.org/wiki/Von_Mises_yield_criterion"}},[e._v("some math")]),e._v(", but I think this requires more information than I take here. ")]},proxy:!0}]),model:{value:e.shearYield,callback:function(t){e.shearYield=e._n(t)},expression:"shearYield"}}),a("token",{attrs:{type:"number",number:"",token:"SHEAR_FRACTURE",description:"The stress at which this material will break when sheared.",placeholder:"310000",complex:"",name:"Shear strength",href:"https://en.wikipedia.org/wiki/Shear_strength"},scopedSlots:e._u([{key:"dwarf",fn:function(){return[e._v(" This is, for all intents and purposes, the "),a("i",[e._v("only")]),e._v(" stat that matters in defense against bladed weapons. Technically a bladed attack failure becomes a blunt attack, so all those stats matter too, but for bladed defense, nothing else matters as much as this, even remotely. On bladed offense, MAX_EDGE is a close second. ")]},proxy:!0},{key:"science",fn:function(){return[e._v(" This one isn't nearly as important as tensile strength, at least in common use in engineering. Apparently it's often just estimated as 60% of tensile strength, assumedly due to the "),a("b-link",{attrs:{href:"https://en.wikipedia.org/wiki/Von_Mises_yield_criterion"}},[e._v("von Mises yield criterion")]),e._v(" as well as the fact that, according to engineers, "),a("katex-element",{attrs:{expression:"\\sqrt{\\frac{1}{3}} = 0.6"}}),e._v(" Dwarf Fortress estimates it as 100% of tensile strength, which is a bit more than that. ")]},proxy:!0}]),model:{value:e.shearFracture,callback:function(t){e.shearFracture=e._n(t)},expression:"shearFracture"}})],1),a("b-form-row",[a("token",{attrs:{type:"number",number:"",token:"COMPRESSIVE_YIELD",description:"The pressure at which this material no longer bounces back when compressed.",placeholder:"542500",complex:"",name:"Compressive yield strength",href:"https://en.wikipedia.org/wiki/Compressive_strength"},scopedSlots:e._u([{key:"dwarf",fn:function(){return[e._v(" This only matters for pinching and strangulation. However, it's copied to IMPACT_YIELD, which matters quite a lot: a material with a low IMPACT_YIELD can be completely deflected by armor with high density (imagine a semi-solid material going "),a("i",[e._v("splat")]),e._v(" against a wall). Interestingly enough, though, a high impact yield actually makes armor "),a("i",[e._v("worse")]),e._v("--the material coefficient in blunt armor calculations is equal to 2*IMPACT_FRACTURE - IMPACT_YIELD--for this material, "+e._s(2*e.compressiveFracture-e.compressiveYield)+'. I would assume this is to represent the fact that a low IMPACT_FRACTURE allows armor to "absorb impact" more--any denting is energy dissipated into the armor, rather than into your squishy, squishy body. ')]},proxy:!0},{key:"science",fn:function(){return[e._v(" This one's an odd one. There's a real-life notion of compressive strength, important in engineering... but whether that means yield or fracture strength is dependent on context. The game uses approximations of 3.5x tensile strength, because, for the most part, there's really no data on this. This is probably more of a Dwarf Fortress problem than a problem with reality, of course. ")]},proxy:!0}]),model:{value:e.compressiveYield,callback:function(t){e.compressiveYield=e._n(t)},expression:"compressiveYield"}}),a("token",{attrs:{type:"number",number:"",token:"COMPRESSIVE_FRACTURE",description:"The pressure at which this material will break when compressed.",placeholder:"1085000"},model:{value:e.compressiveFracture,callback:function(t){e.compressiveFracture=e._n(t)},expression:"compressiveFracture"}},[e._v(" This is copied to impact fracture, which, along with shear fracture and to a lesser extent density and impact yield (albeit inversely) are the only properties that matter for armor, period. Everything else is related to skill, weapon and armor themselves. The higher the better, for this and shear fracture. For density, higher is better on defense, but lower-skilled armor users will have trouble wearing it without being encumbered. For reality: see compressive yield. ")])],1),a("b-form-row",[a("token",{attrs:{type:"number",number:"",token:"MAX_EDGE",description:"How sharp the material can get.",placeholder:"10000"},model:{value:e.maxEdge,callback:function(t){e.maxEdge=e._n(t)},expression:"maxEdge"}},[e._v(" This is the sharpest a weapon of this material can be. Lower-quality weapons are less sharp, so this also, to an extent, makes quality more important for weapons, though higher is "),a("i",[e._v("always")]),e._v(" better. ")])],1)],1)],1),a("b-tab",{attrs:{lazy:"",title:"Elasticity"}},[a("elasticity",{model:{value:e.elasticity,callback:function(t){e.elasticity=t},expression:"elasticity"}})],1),a("b-tab",{attrs:{title:"Facts"}},[a("combat-sims",{attrs:{name:e.solidName,solidDensity:e.solidDensity,impactYield:e.impactYield,impactFracture:e.impactFracture,shearYield:e.shearYield,shearFracture:e.shearFracture,maxEdge:e.maxEdge}},[a("b-tabs",[a("b-tab",{attrs:{title:"Interesting properties"}},[e._v(" Speed of sound is "),a("katex-element",{attrs:{"display-mode":"",expression:e.speedOfSound}}),a("br"),e._v(" Your material can be considered "),e.shearFracture/e.shearYield>1.1&&e.shearElasticity>100?a("span",[e._v("ductile")]):a("span",[e._v("brittle")]),e._v(". ")],1),a("b-tab",{attrs:{title:"Stress-strain properties"}},[a("p",[e._v('The below is the "approximate" '),a("b-link",{attrs:{href:"https://en.wikipedia.org/wiki/Stress–strain_curve"}},[e._v("stress-strain curve")]),e._v(" of your material. Up to yield it should be reasonably accurate, after that it's just a silly flat line because, well, there's no simulation of any of the properties between yield and fracture.")],1),a("svg",{attrs:{width:"505px",height:"300px"}},[a("path",{attrs:{id:"stressStrain",d:e.stressStrainCurve,stroke:"cyan","fill-opacity":"0","stroke-width":"3"}}),a("path",{attrs:{d:"M 100 0 V 300 H 500","fill-opacity":"0","stroke-width":"2",stroke:"white"}}),a("text",{attrs:{x:100+e.tensileYield/e.tensileFracture*400,y:"50",stroke:"white",fill:"white"}},[e._v("Yield")]),a("circle",{attrs:{cx:100+e.tensileYield/e.tensileFracture*400,cy:"30",r:"4",fill:"white"}}),a("text",{attrs:{"text-anchor":"middle",x:"500",y:"30",stroke:"white",fill:"white",dy:".3em"}},[e._v("x")]),a("text",{attrs:{"text-anchor":"end",x:"500",y:"50",stroke:"white",fill:"white"}},[e._v("Fracture")]),a("text",{attrs:{"text-anchor":"end",x:"100",y:"250",stroke:"white",fill:"white"}},[e._v("Stress (σ)")]),a("text",{attrs:{"text-anchor":"start",x:"150",y:"290",stroke:"white",transform:"translate(-10 0)",fill:"white"}},[a("textPath",{attrs:{href:"#stressStrain"}},[e._v("Stress-strain curve")])]),a("text",{attrs:{"text-anchor":"start",x:"200",y:"295",stroke:"white",fill:"white"}},[e._v("Strain (ε)")])]),a("katex-element",{attrs:{"display-mode":"",expression:e.toughness}}),a("p",[e._v("This is, of course, the integral of the above graph, using the "),a("b-link",{attrs:{href:"https://en.wikipedia.org/wiki/Trapezoidal_rule"}},[e._v("trapezoidal rule")]),e._v(" to get... well, an exact value. It has no meaning whatsoever in Dwarf Fortress... or does it? There is a sense in which it might apply: blunt defense does increase with the difference between fracture and yield, just like this value does.")],1)],1),a("b-tab",{attrs:{title:"Stiffness tensor"}},[a("p",[e._v("This is the material's stiffness tensor in matrix form. Since all materials in DF are kinda inherently isomorphic and homogenous, it's that particular form of it. If the game allowed other kinds of materials... well, it'd get a lot "),a("i",[e._v("weirder")]),e._v(", for one thing. A tool such as this might be entirely "),a("i",[e._v("necessary")]),e._v(", even!")]),a("katex-element",{attrs:{"display-mode":"",expression:e.stiffness}})],1)],1)],1)],1),e._e()],1)],1),a("b-col",[a("b-button-toolbar",[a("b-form-checkbox",{attrs:{button:"","button-variant":e.shouldShowAll?"success":"danger"},model:{value:e.shouldShowAll,callback:function(t){e.shouldShowAll=t},expression:"shouldShowAll"}},[e._v(" Show"+e._s(e.shouldShowAll?"ing":"")+" all ")]),e.showAll?a("b-button",{attrs:{variant:"primary"},on:{click:e.copyRaw}},[e._v(e._s(e.buttonText))]):e._e()],1),a("pre",{staticStyle:{"text-align":"left"},attrs:{id:"result"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.showGame,expression:"showGame"}]},[e.name==e.adj?a("span",[e._v("\n[STATE_NAME_ADJ:ALL_SOLID:"+e._s(e.solidName)+"]\n[STATE_NAME_ADJ:LIQUID:"+e._s(e.liquidName)+"]\n[STATE_NAME_ADJ:GAS:"+e._s(e.gasName)+"]")]):a("span",[e._v("\n[STATE_NAME:ALL_SOLID:"+e._s(e.solidName)+"]\n[STATE_NAME:LIQUID:"+e._s(e.liquidName)+"]\n[STATE_NAME:GAS:"+e._s(e.gasName)+"]\n[STATE_ADJ:ALL_SOLID:"+e._s(e.solidAdj)+"]\n[STATE_ADJ:LIQUID:"+e._s(e.liquidAdj)+"]\n[STATE_ADJ:GAS:"+e._s(e.gasAdj)+"]")]),e._v("\n[DISPLAY_COLOR:0:7:1]\n[BUILD_COLOR:0:7:1]\n[MATERIAL_VALUE:"+e._s(Math.round(e.matValue))+"]")]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.showThermal,expression:"showThermal"}]},[e._v("\n[SPEC_HEAT:"+e._s(Math.round(e.specHeat))+"]"),e.melting_exists?a("span",[e._v("\n[MELTING_POINT:"+e._s(Math.round(e.melting))+"]")]):e._e(),e.boiling_exists?a("span",[e._v("\n[BOILING_POINT:"+e._s(Math.round(e.boiling))+"]")]):e._e(),e.ignition_exists?a("span",[e._v("\n[IGNITE_POINT:"+e._s(Math.round(e.ignition))+"]")]):e._e(),e.colddam_exists?a("span",[e._v("\n[COLDDAM_POINT:"+e._s(Math.round(e.colddam))+"]")]):e._e(),e.heatdam_exists?a("span",[e._v("\n[HEATDAM_POINT:"+e._s(Math.round(e.heatdam))+"]")]):e._e()]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.showStrength,expression:"showStrength"}]},[e._v("\n"),e.reasonableEdged&&e.maxEdge>=1e4?a("span",[e._v("[ITEMS_WEAPON]")]):e._e(),e.solidDensity<1e4&&e.impactFracture>1e5?a("span",[e._v("[ITEMS_WEAPON_RANGED]")]):e._e(),e.solidDensity*e.shearFracture>5e8?a("span",[e._v("[ITEMS_AMMO]")]):e._e(),e.impactFracture>5e5?a("span",[e._v("[ITEMS_DIGGER]\n")]):e._e(),e.reasonableEdged&&e.bluntDefense>1e6?a("span",[e._v("[ITEMS_ARMOR]\n")]):e._e(),e.magmaSafe&&e.bluntDefense>5e5?a("span",[e._v("[ITEMS_ANVIL]\n")]):e._e()]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.showGame,expression:"showGame"}]},[e._v("[ITEMS_METAL]\n[ITEMS_HARD]\n[ITEMS_SCALED]\n[ITEMS_BARRED]")]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.showMass,expression:"showMass"}]},[e._v("\n[SOLID_DENSITY:"+e._s(Math.round(e.solidDensity))+"]\n[LIQUID_DENSITY:"+e._s(Math.round(e.liquidDensity))+"]\n[MOLAR_MASS:"+e._s(Math.round(e.molarMass))+"]")]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.showStrength,expression:"showStrength"}]},[e._v("\n[IMPACT_YIELD:"+e._s(Math.round(e.impactYield))+"]\n[IMPACT_FRACTURE:"+e._s(Math.round(e.impactFracture))+"]\n[IMPACT_STRAIN_AT_YIELD:"+e._s(Math.round(e.impactElasticity))+"]\n[COMPRESSIVE_YIELD:"+e._s(Math.round(e.compressiveYield))+"]\n[COMPRESSIVE_FRACTURE:"+e._s(Math.round(e.compressiveFracture))+"]\n[COMPRESSIVE_STRAIN_AT_YIELD:"+e._s(Math.round(e.compressiveElasticity))+"] bulk modulus "+e._s(e.elasticity.bulk/1e3)+" GPa\n[TENSILE_YIELD:"+e._s(Math.round(e.tensileYield))+"]\n[TENSILE_FRACTURE:"+e._s(Math.round(e.tensileFracture))+"]\n[TENSILE_STRAIN_AT_YIELD:"+e._s(Math.round(e.tensileElasticity))+"] young's modulus "+e._s(e.elasticity.young/1e3)+" GPa\n[TORSION_YIELD:"+e._s(Math.round(e.shearYield))+"]\n[TORSION_FRACTURE:"+e._s(Math.round(e.shearFracture))+"]\n[TORSION_STRAIN_AT_YIELD:"+e._s(Math.round(e.shearElasticity))+"]\n[SHEAR_YIELD:"+e._s(Math.round(e.shearYield))+"]\n[SHEAR_FRACTURE:"+e._s(Math.round(e.shearFracture))+"]\n[SHEAR_STRAIN_AT_YIELD:"+e._s(Math.round(e.shearElasticity))+"] shear modulus "+e._s(e.elasticity.shear/1e3)+" GPa\n[BENDING_YIELD:"+e._s(Math.round(e.bendingYield))+"]\n[BENDING_FRACTURE:"+e._s(Math.round(e.bendingFracture))+"]\n[BENDING_STRAIN_AT_YIELD:"+e._s(Math.round(e.bendingElasticity))+"]\n[MAX_EDGE:"+e._s(Math.round(e.maxEdge))+"]")]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.showGame,expression:"showGame"}]},[e._v("\n[STATE_COLOR:ALL_SOLID:"+e._s(e.color)+"]")]),e._v("\n")])],1)],1)],1)],1)},I=[],S=a("b85c"),A=(a("6b93"),a("fb6a"),a("b0c0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tab_content"},[a("b-container",[a("b-row",[a("b-form-checkbox",{model:{value:e.realisticElasticity,callback:function(t){e.realisticElasticity=t},expression:"realisticElasticity"}},[e._v(" Realistic auto-fill ")]),a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.realism-help",modifiers:{"realism-help":!0}}],attrs:{variant:"info"}},[e._v("?")]),a("b-collapse",{attrs:{accordion:"elasticity-accord",id:"realism-help"}},[e._v(" All materials in Dwarf Fortress are homogenous and isotropic, and all homogonous and isotropic materials can calculate all of the below properties using any two of them. This does this automatically. Wikipedia has an ever-in-depth "),a("b-link",{attrs:{href:"https://en.wikipedia.org/wiki/Hooke%27s_law"}},[e._v("article on this")]),e._v(", with the specific table I'm using being on the "),a("b-link",{attrs:{href:"https://en.wikipedia.org/wiki/Template:Elastic_moduli"}},[e._v("elastic modulus template.")]),e._v(". ")],1)],1)],1),a("b-input-group",{scopedSlots:e._u([{key:"append",fn:function(){return[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.bulk-help",modifiers:{"bulk-help":!0}}],attrs:{variant:"info"}},[e._v("Bulk")])]},proxy:!0}])},[a("b-input-group-prepend",[e.realisticElasticity?a("b-form-radio",{attrs:{name:"anchor",squared:"","button-variant":"outline-dark",button:"",value:"bulk"},model:{value:e.anchor,callback:function(t){e.anchor=t},expression:"anchor"}},["bulk"==e.anchor?a("b-icon-lock"):a("b-icon-unlock")],1):e._e()],1),a("b-form-input",{attrs:{number:"",type:"number",value:e.bulk},on:{input:function(t){return e.update_elasticity(t,"bulk")}}})],1),a("b-collapse",{attrs:{accordion:"elasticity-accord",id:"bulk-help"}},[a("token-info",{attrs:{name:"Bulk modulus",href:"https://en.wikipedia.org/wiki/Bulk_modulus",token:"IMPACT_STRAIN_AT_YIELD"},scopedSlots:e._u([{key:"dwarf",fn:function(){return[e._v(" Used for COMPRESSIVE_STRAIN_AT_YIELD and IMPACT_STRAIN_AT_YIELD. When an attack fails to reach the momentum threshold for breaking through an attack, the momentum of the attack will still pass through, but will have its momentum divded by IMPACT_STRAIN_AT_YIELD/50000. This is very near zero for most materials; however, STRAIN_AT_YIELD is assumed 50000 for chain armor. ")]},proxy:!0},{key:"science",fn:function(){return[e._v(" If you apply pressure to a sphere of material from all sides equally, the sphere will shrink; the bulk modulus is a measure of how much it shrinks, specifically how much pressure it takes to divide its radius by two. Most materials will break far before then, but this is a constant of proportionality. "),a("svg",{attrs:{width:"40",height:"40"}},[a("title",[e._v("A circle is squashed to half of its radius.")]),a("circle",{attrs:{id:"bulk",cx:"20",cy:"20",r:"20",fill:"gray"}},[a("animate",{attrs:{begin:"bulk.click",attributeName:"r",to:"10",dur:"3s",fill:"freeze"}})])])]},proxy:!0}])})],1),a("b-input-group",{scopedSlots:e._u([{key:"append",fn:function(){return[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.young-help",modifiers:{"young-help":!0}}],attrs:{variant:"info"}},[e._v("Young's")])]},proxy:!0}])},[a("b-input-group-prepend",[e.realisticElasticity?a("b-form-radio",{attrs:{name:"anchor",button:"",squared:"","button-variant":"outline-dark",value:"young"},model:{value:e.anchor,callback:function(t){e.anchor=t},expression:"anchor"}},["young"==e.anchor?a("b-icon-lock"):a("b-icon-unlock")],1):e._e()],1),a("b-form-input",{attrs:{number:"",type:"number",value:e.young},on:{input:function(t){return e.update_elasticity(t,"young")}}})],1),a("b-collapse",{attrs:{accordion:"elasticity-accord",id:"young-help"}},[a("token-info",{attrs:{name:"Young's modulus",href:"https://en.wikipedia.org/wiki/Young%27s_modulus",token:"TENSILE_STRAIN_AT_YIELD"},scopedSlots:e._u([{key:"dwarf",fn:function(){return[e._v(" Used for TENSILE_STRAIN_AT_YIELD and BENDING_STRAIN_AT_YIELD. Neither of these are used much by the game, if at all. If they are, it's in wrestling or, more likely, in attacks transferring momentum to parent parts via bending. ")]},proxy:!0},{key:"science",fn:function(){return[e._v(" If you pull on a rod on both sides, it'll stretch out. This is how much pressure has to be applied to stretch it so that it's at twice the length. Again, most materials will break well before this, and it's a constant of proportionality. "),a("svg",{attrs:{width:"100",height:"30"}},[a("title",[e._v("A rectangle, twice as wide as it is long, is stretched to be four times as wide as it is long when clicked.")]),a("polygon",{attrs:{id:"youngs",points:"25,0 25,25 75,25 75,0",fill:"gray"}},[a("animate",{attrs:{begin:"youngs.click",attributeName:"points",to:"0,0 0,25 100,25 100,0",dur:"3s",fill:"freeze"}})])])]},proxy:!0}])})],1),a("b-input-group",{scopedSlots:e._u([{key:"append",fn:function(){return[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.shear-help",modifiers:{"shear-help":!0}}],attrs:{variant:"info"}},[e._v("Shear")])]},proxy:!0}])},[a("b-input-group-prepend",[e.realisticElasticity?a("b-form-radio",{attrs:{name:"anchor",button:"",squared:"","button-variant":"outline-dark",value:"shear"},model:{value:e.anchor,callback:function(t){e.anchor=t},expression:"anchor"}},["shear"==e.anchor?a("b-icon-lock"):a("b-icon-unlock")],1):e._e()],1),a("b-form-input",{attrs:{number:"",type:"number",value:e.shear},on:{input:function(t){return e.update_elasticity(t,"shear")}}})],1),a("b-collapse",{attrs:{accordion:"elasticity-accord",id:"shear-help"}},[a("token-info",{attrs:{name:"Shear modulus",href:"https://en.wikipedia.org/wiki/Shear_modulus",token:"SHEAR_STRAIN_AT_YIELD"},scopedSlots:e._u([{key:"dwarf",fn:function(){return[e._v(" Used for SHEAR_STRAIN_AT_YIELD and TORSION_STRAIN_AT_YIELD. Used like IMPACT_STRAIN_AT_YIELD (bulk modulus), but for failed edged attacks instead. ")]},proxy:!0},{key:"science",fn:function(){return[e._v(" If you affix a cube to the ground and press on the top, the bottom will stay the same while the top will move. The shear modulus is how much pressure has to be applied to... uh, just click this. "),a("svg",{attrs:{width:"100",height:"50"}},[a("title",[e._v("Take a rectangle with points ABCD, top left then clockwise. The rectangle is skewed--sheared--so that it's a parallelogram, with diagonal AC now a vertical line.")]),a("polygon",{attrs:{id:"shear",points:"0,0 0,50 50,50 50,0",fill:"gray"}},[a("animate",{attrs:{begin:"shear.click",attributeName:"points",to:"50,0 0,50 50,50 100,0",dur:"3s",fill:"freeze"}})])]),e._v(" This is how much pressure it takes to deform a cube "),a("i",[e._v("exactly")]),e._v(" like this, when viewed face-on. ")]},proxy:!0}])})],1),e.realisticElasticity?a("div",[a("b-input-group",{scopedSlots:e._u([{key:"append",fn:function(){return[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.lamé-help",modifiers:{"lamé-help":!0}}],attrs:{variant:"info"}},[e._v("λ")])]},proxy:!0}],null,!1,2299531780)},[a("b-input-group-prepend",[e.realisticElasticity?a("b-form-radio",{attrs:{name:"anchor",button:"",squared:"","button-variant":"outline-dark",value:"lamé"},model:{value:e.anchor,callback:function(t){e.anchor=t},expression:"anchor"}},["lamé"==e.anchor?a("b-icon-lock"):a("b-icon-unlock")],1):e._e()],1),a("b-form-input",{attrs:{number:"",type:"number",value:e.lamé},on:{input:function(t){return e.update_elasticity(t,"lamé")}}})],1),a("b-collapse",{attrs:{accordion:"elasticity-accord",id:"lamé-help"}},[a("b-card",[a("b-card-title",[a("b-button",{attrs:{block:"",variant:"primary",href:"https://en.wikipedia.org/wiki/Lam%C3%A9_parameters"}},[e._v("Wikipedia")])],1),a("b",[e._v("Lamé's first parameter")]),e._v(", or "),a("b",[e._v("λ")]),e._v(", is one of the parameters relating stress to strain in materials in 3D space. This is, of course, true of "),a("b",[e._v("all")]),e._v(" of the parameters in this tab, but Lamé's is interesting for being a lot more difficult to describe its physical consequences. Obviously it has some; one can describe all of an isomorphic homogenous material's elastic properties using nothing but λ and any of these other ones. "),a("a",{attrs:{href:"https://agilescientific.com/blog/2012/9/26/l-is-for-lambda.html"}},[e._v("Here's a post on it, I guess.")]),e._v(" It's mostly here for convenience sake: there is a small chance a material will have only λ and one other parameter (probably the shear modulus, Lamé's second). This is also why we add Poisson's ratio, below. ")],1)],1),a("b-input-group",{scopedSlots:e._u([{key:"append",fn:function(){return[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.poisson-help",modifiers:{"poisson-help":!0}}],attrs:{variant:"info"}},[e._v("ν")])]},proxy:!0}],null,!1,1126240706)},[a("b-input-group-prepend",[e.realisticElasticity?a("b-form-radio",{attrs:{name:"anchor",squared:"","button-variant":"outline-dark",button:"",value:"poisson"},model:{value:e.anchor,callback:function(t){e.anchor=t},expression:"anchor"}},["poisson"==e.anchor?a("b-icon-lock"):a("b-icon-unlock")],1):e._e()],1),a("b-form-input",{attrs:{lazy:"",id:"poisson",step:"0.05",max:"0.499",min:"-0.999",type:"number",number:"",state:e.poisson_state,value:e.poisson},on:{input:function(t){return e.update_elasticity(t,"poisson")}}}),a("b-form-invalid-feedback",{attrs:{id:"poisson-feedback"}},[e._v(" Poisson ratio can only be between -1 and 0.5, otherwise you get negative elastic moduli. ")])],1),a("b-collapse",{attrs:{accordion:"elasticity-accord",id:"poisson-help"}},[a("b-card",[a("b-card-title",[a("b-button",{attrs:{block:"",variant:"primary",href:"https://en.wikipedia.org/wiki/Poisson%27s_ratio"}},[e._v("Wikipedia")])],1),a("p",[a("b",[e._v("Poisson's ratio")]),e._v(" is the ratio of deformation in directions perpendicular to load to the deformation in the same direction. For example, a poisson ratio of 0.3 means that if you squeeze an object made of this material from the top hard enough to reduce its length in that direction to 50%, its width will "),a("i",[e._v("increase")]),e._v(" by 15%. This is the default lock because more than any other value here, one could consider it a proportionality constant between "),a("i",[e._v("other elasticity moduli")]),e._v(". This is aided by the fact that it's constrained: values outside the range -1 to 0.5 exclusive cause singularities or 0 or negative elasticity, which is physical nonsense.")]),a("p",[e._v("Typically, metals usually have a poisson ratio around 0.3. Poisson ratios of less than 0 are very rare excepting certain metamaterials, often designed specifically to have this property. A material like rubber, with a poisson ratio very close to 0.5, is easy to stretch but hard to compress. A poisson ratio of 0 has the shear modulus precisely 1/2 of young's modulus and bulk modulus precisely 1/3 of young's.")])],1)],1),a("p",[e._v("I recommend you keep poisson ratio on lock unless you only know two material properties anyway. For example, if you only know shear modulus and bulk modulus, you should input one or the other, lock the one you just input, then input the other one; the rest will fill out accordingly.")]),a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.graph",modifiers:{graph:!0}}],attrs:{variant:"info"}},[e._v("Graph helper")]),a("b-collapse",{attrs:{id:"graph"}},[a("p",[e._v("This asks for your name. "),a("b",[e._v("Please do not use your real name. I will have access to it. Just put nonsense in or whatever.")])]),a("b-embed",{attrs:{type:"iframe",aspect:"4by3",src:"https://student.desmos.com/join/52gpfc"}})],1)],1):e._e()],1)}),E=[],D=(a("a9e3"),a("18a5"),a("7386")),M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-card",{attrs:{"border-variant":"transparent"}},[a("b-tabs",{attrs:{card:"",justified:""}},[a("b-tab",{attrs:{title:"Dwarf Fortress","title-item-class":"bg-science"}},[a("b-card-title",[a("b-button",{attrs:{block:"",variant:"primary",href:e.dfwiki}},[e._v("Dwarf Fortress wiki")])],1),e._t("dwarf")],2),a("b-tab",{attrs:{title:"Real Life","title-item-class":"bg-science"}},[a("b-card-title",[a("b-button",{attrs:{block:"",variant:"primary",href:e.href}},[e._v("Wikipedia")])],1),e._t("science")],2)],1)],1)},F=[],N={props:{name:String,href:String,token:String},computed:{dfwiki:function(){return"https://dwarffortresswiki.org/index.php/DF2014:Material_definition_token#"+this.token}}},L=N,O=Object(o["a"])(L,M,F,!1,null,null,null),j=O.exports,R={props:{elasticity:Object},components:{BIconLock:D["m"],BIconUnlock:D["s"],TokenInfo:j},data:function(){return{bulk:17e4,young:211e3,shear:82e3,"lamé":115e3,poisson:.293,realisticElasticity:!1,anchor:"poisson"}},model:{prop:"elasticity",event:"update:elasticity"},methods:{getSigFig:function(e){if(!e)return e;var t=0;if(Math.abs(e)>1){var a=0;while(Math.floor(e/Math.pow(10,a))==e/Math.pow(10,a))a++;return Math.floor(Math.log10(e))-(a-2)}t=0;while(Math.floor(e*Math.pow(10,t))!=e*Math.pow(10,t))t++;return t},sigFigs:function(e,t){var a=Math.pow(10,t-Math.floor(Math.log(e)/Math.LN10)-1);return Math.round(e*a)/a},getSigFigs:function(e){var t,a=-1/0,i=Object(S["a"])(e);try{for(i.s();!(t=i.n()).done;){var s=t.value;a=Math.max(this.getSigFig(s),a)}}catch(n){i.e(n)}finally{i.f()}return a},parameterize:function(e){if(this.realisticElasticity){var t=function(t){return-1==e.indexOf(t)};if(t("poisson")){if(t("young")){if(t("bulk")){var a=Math.max(this.getSigFigs([this.lamé,this.shear]),3);this.bulk=this.sigFigs(this.lamé+2*this.shear/3,a),e+="bulk"}var i=this.bulk,s=this.shear,n=Math.max(this.getSigFigs([i,s]),3);this.young=this.sigFigs(9*i*s/(3*i+s),n),e+="young"}var r=Math.max(this.getSigFigs([this.young,this.shear]),3);this.poisson=this.sigFigs(this.young/(2*this.shear)-1,r),e+="poisson"}if(t("young")){var o=1-2*this.poisson;if(t("bulk")){if(t("shear")){var l=Math.max(this.getSigFigs([this.lamé,this.poisson]),3),h=this.poisson,c=this.lamé;this.shear=this.sigFigs(c*o/(2*h),l),e+="shear"}var u=Math.max(this.getSigFigs([this.poisson,this.shear]),3);this.bulk=this.sigFigs(2*this.shear*(1+this.poisson)/(3*o),u),e+="bulk"}var d=this.bulk,m=this.poisson,p=Math.max(this.getSigFigs([d,m]),3);this.young=this.sigFigs(3*d*o,p),e+="young"}var f=this.poisson,b=this.young,g=Math.max(this.getSigFigs([f,b]),3);t("bulk")&&(this.bulk=this.sigFigs(b/(3*(1-2*f)),g)),t("shear")&&(this.shear=this.sigFigs(b/(2*(1+f)),g)),t("lamé")&&(this.lamé=this.sigFigs(b*f/((1+f)*(1-2*f)),g))}this.$emit("update:elasticity",{bulk:this.bulk,young:this.young,shear:this.shear})},update_elasticity:function(e,t){e||(e=0),this[t]=Number(e),this.parameterize([t,this.anchor])}},computed:{poisson_state:function(){return this.poisson>-1&&this.poisson<.5&&null}}},Y=R,C=Object(o["a"])(Y,A,E,!1,null,null,null),P=C.exports,H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-col",{staticClass:"border"},[a("b-form-group",{attrs:{description:e.description,label:e.id,"v-for":e.id}},[e.optional?a("b-button",{attrs:{variant:e.exists?"primary":"secondary",pressed:e.exists},on:{"update:pressed":function(t){e.exists=t},click:function(t){return e.set_exists()}}},[e._v(e._s(e.name))]):e._e(),a("b-collapse",{model:{value:e.exists,callback:function(t){e.exists=t},expression:"exists"}},[a("b-input-group",{scopedSlots:e._u([{key:"append",fn:function(){return[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle:[id]",arg:e.id}],attrs:{variant:"info"}},[e._v("?")])]},proxy:!0},{key:"prepend",fn:function(){return[a("b-form-select",{attrs:{options:e.tempTypes},model:{value:e.tempType,callback:function(t){e.tempType=t},expression:"tempType"}})]},proxy:!0}])},[a("b-form-input",{attrs:{number:"",type:"number",value:e.temp},on:{input:function(t){return e.set_value(t)}}})],1),a("b-collapse",{attrs:{id:e.id,right:"",width:"min-content","sidebar-class":"border-left",title:"Help"}},[e._t("default")],2)],1)],1)],1)},q=[],G={name:"TemperatureInput",props:{modelValue:Number,name:String,optional:Boolean,id:String,disabled:Boolean,description:String},model:{prop:"modelValue",event:"update:modelValue"},data:function(){return{temp:1111,tempType:"c",tempTypes:[{value:"c",text:"Celsius"},{value:"k",text:"Kelvins"},{value:"f",text:"Fahrenheit"},{value:"u",text:"Urists"}],exists:!0}},mounted:function(){this.exists=!this.disabled,this.set_exists()},methods:{set_value:function(e){this.temp=e;var t=Number(this.temp);"k"==this.tempType&&(t-=273.15),"c"!=this.tempType&&"k"!=this.tempType||(t=1.8*t+32),"u"!=this.tempType&&(t+=9968),this.$emit("update:modelValue",Math.round(t))},set_exists:function(){this.optional&&this.$emit("update:exists",this.exists)}}},B=G,z=Object(o["a"])(B,H,q,!1,null,null,null),W=z.exports,U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-col",{staticClass:"border"},[a("b-form-group",{attrs:{description:e.description,label:e.token,"v-for":e.token}},[a("b-input-group",{scopedSlots:e._u([{key:"append",fn:function(){return[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle:[description]",arg:e.description}],attrs:{variant:"info"}},[e._v("?")])]},proxy:!0}])},[a("b-form-input",{attrs:{placeholder:e.placeholder,debounce:"500",number:e.number,id:e.token,value:e.tokenValue,type:e.type},on:{input:function(t){return e.$emit("input",t)}}})],1)],1),a("b-collapse",{attrs:{id:e.description}},[e.complex?a("div",[a("token-info",{attrs:{name:e.name,href:e.href,token:e.token},scopedSlots:e._u([{key:"dwarf",fn:function(){return[e._t("dwarf")]},proxy:!0},{key:"science",fn:function(){return[e._t("science")]},proxy:!0}],null,!0)})],1):a("div",[e._t("default")],2)])],1)},V=[],$={components:{TokenInfo:j},name:"Token",props:{name:String,href:String,description:String,token:String,tokenValue:String,number:Boolean,type:String,placeholder:String,complex:Boolean}},Q=$,J=Object(o["a"])(Q,U,V,!1,null,null,null),K=J.exports,Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-tabs",[a("b-tabs",{attrs:{pills:"",card:""}},[a("b-tab",{attrs:{lazy:"",title:"Matchups"}},[a("p",[e._v("Here we have a bunch of matchup charts, how well the material does against another. It's standard matchup chart fare: 10 means it wins every time, 0 means it never wins.")]),a("p",[e._v("Matchup chart of attacks vs plate armor "),a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.caveat",modifiers:{caveat:!0}}],attrs:{variant:"info"}},[e._v("?")])],1),a("b-collapse",{attrs:{id:"caveat"}},[a("b-card",[a("b-card-text",[e._v("Muscle numbers are going to be off because it's actually testing against a breastplate and a helmet. Solid-muscle plate armor. Very silly.")])],1)],1),a("b-table",{attrs:{id:"attacks-table",items:e.attacks,filter:""}}),a("p",[e._v("Matchup chart of plate armor defense")]),a("b-table",{attrs:{id:"defense-table",items:e.defense,filter:""}}),a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.technical",modifiers:{technical:!0}}],attrs:{variant:"info"}},[e._v("Technical stuff/method")]),a("b-collapse",{attrs:{id:"technical"}},[a("b-card",[a("b-card-text",[e._v(" The actual simulation is a monte carlo simulation implemented in Rust, using WebAssembly. Simply put: it tests: "),a("b-container",[a("b-row",[a("b-col",[e._v("4 breastplates"),a("br"),e._v("4 -breastplates-"),a("br"),e._v("3 +breastplates+"),a("br"),e._v("2 *breastplates*"),a("br"),e._v("2 ≡breastplates≡"),a("br"),e._v("2 ☼breastplates☼"),a("br"),e._v("1 artifact breastplate")]),e._v("against each individual attack you see above, multiplied by"),a("b-col",[e._v("3 weapons"),a("br"),e._v("2 -weapons-"),a("br"),e._v("2 +weapons+"),a("br"),e._v("2 *weapons*"),a("br"),e._v("2 ≡weapons≡"),a("br"),e._v("2 ☼weapons☼.")])],1)],1),e._v(" It then does the same for helmets, for each material you see. This gives us a total of "+e._s(22464)+' trials. Each individual trial is between two dwarves of random body size and strength, using the very same algorithm as Dwarf Fortress does for the randomness as well as determining whether the attack "wins". The attack is assumed square, and no attack modifiers are taken into account. If you\'re interested, '),a("b-link",{attrs:{href:"https://github.com/Putnam3145/putnam3145-github-io-wasm/blob/master/src/lib.rs"}},[e._v("the Rust code is here.")]),a("p",[e._v("Here's how the calculation works. First, we calculate the momentum like so:")]),a("katex-element",{attrs:{"display-mode":"",expression:"M = \\frac{\\text{size} \\cdot \\text{strength} \\cdot \\text{attack velocity}}{\\frac{10000(10000+size)}{W}}"}}),a("p",[e._v('"Attack velocity" here refers to the last number in an ATTACK token\'s definition.')]),a("p",[e._v("Now, we need to establish some terms. "),a("katex-element",{attrs:{expression:"a_{foo}"}}),e._v(" is a material property of the armor, "),a("katex-element",{attrs:{expression:"W_{foo}"}}),e._v(" is a material property of the weapon. "),a("katex-element",{attrs:{expression:"(M)_{x(y|f)}"}}),e._v(" is yield or fracture of material "),a("katex-element",{attrs:{expression:"M"}}),e._v("; for example, "),a("katex-element",{attrs:{expression:"M_{sy}"}}),e._v(" is the shear yield.")],1),a("p",[e._v("Then, we check against blades, if the attack is edged:")]),a("katex-element",{attrs:{"display-mode":"",expression:"M \\ge \\frac{a_{sy}}{W_{sy}} + A\\frac{a_{sf}}{W_{sf}}\\frac{10+2Q_a}{Q_wW_e}"}}),a("p",[e._v("Where "),a("katex-element",{attrs:{expression:"Q_a"}}),e._v(" is the armor quality coefficient, "),a("katex-element",{attrs:{expression:"Q_w"}}),e._v(" is weapon sharpness quality coefficient, "),a("katex-element",{attrs:{expression:"W_e"}}),e._v(" is the max edge of the weapon divided by 10,000 and "),a("katex-element",{attrs:{expression:"A"}}),e._v(" is the contact area of the attack, which is the layer size or the attack's actual contact area, whichever is smaller. "),a("b-link",{attrs:{href:"https://dwarffortresswiki.org/index.php/DF2014:Item_quality#Quality_grades"}},[e._v("See here for quality grades.")])],1),a("p",[e._v("If that gets through, the following is then checked:")]),a("katex-element",{attrs:{"display-mode":"",expression:"\\frac{2W_sW_{iy}}{1000} \\ge Aa_\\rho"}}),a("p",[e._v("Where "),a("katex-element",{attrs:{expression:"W_s"}}),e._v(" is the weapon's physical size (e.g. 800 for maces) and "),a("katex-element",{attrs:{expression:"M_\\rho"}}),e._v(" is material M's density.")],1),a("p",[e._v("If this fails, the attack is stopped short. If it succeeds, we move on to this:")]),a("katex-element",{attrs:{"display-mode":"",expression:"M \\ge (\\frac{2a_{if}}{10^6}-\\frac{a_{iy}}{10^6})(2+0.4Q_a)A"}}),a("p",[e._v("And if that succeeds, the attack has won.")]),a("p",[e._v("All these equations came from "),a("b-link",{attrs:{href:"https://dwarffortresswiki.org/index.php/DF2014:Material_science"}},[e._v("the Dwarf Fortress wiki article on material science")]),e._v(" as well as "),a("b-link",{attrs:{href:"http://www.bay12forums.com/smf/index.php?topic=142372.msg5767755#msg5767755"}},[e._v("this combat calculator")])],1)],1)],1)],1)],1),a("b-tab",{attrs:{lazy:"",title:"Values"}},[a("b-table",{attrs:{id:"values-table",items:e.values,filter:""}})],1),a("b-tab",{attrs:{title:"Misc."}},[e._t("default")],2)],1)],1)},X=[],ee=a.e("chunk-76fd9eda").then(a.bind(null,"675b")),te=function(e,t,a,i,s,n,r,o){return{name:e,solidDensity:t,impactYield:a,impactFracture:i,shearYield:s,shearFracture:n,maxEdge:r,armor:o}},ae=function(e,t,a){return{name:e,size:t,attacks:a}},ie=function(e,t,a,i){return{name:e,edged:t,velocity:a,area:i}},se=[new ae("mace",800,[new ie("bash",!1,2,20)]),new ae("short sword",300,[new ie("slash",!0,1.25,2e4),new ie("stab",!0,1,50)]),new ae("spear",400,[new ie("stab",!0,1,20)])],ne=[new te("muscle",1060,1e4,1e4,2e4,2e4,0,!0),new te("iron",7850,542500,1085e3,155e3,31e4,1e4,!0),new te("copper",8930,245e3,77e4,7e4,22e4,1e4,!0),new te("bronze",8250,602e3,843500,172e3,241e3,1e4,!0),new te("silver",10490,35e4,595e3,1e5,17e4,1e4,!1),new te("steel",7850,1505e3,252e4,43e4,72e4,1e4,!0),new te("adamantine",200,5e6,5e6,5e6,5e6,1e5,!0)];function re(e){return"number"==typeof e?e:0}var oe={name:"CombatSims",props:{name:String,solidDensity:Number,impactYield:Number,impactFracture:Number,shearYield:Number,shearFracture:Number,maxEdge:Number},computed:{mat:function(){return new te(name,re(this.solidDensity),re(this.impactYield),re(this.impactFracture),re(this.shearYield),re(this.shearFracture),re(this.maxEdge),!0)}},watch:{$props:{handler:function(){this.$root.$emit("bv::refresh::table","attacks-table"),this.$root.$emit("bv::refresh::table","defense-table")},deep:!0,immediate:!0}},methods:{attacks:function(e,t){var a=this.mat;return ee.then((function(e){var i,s=[],n=Object(S["a"])(se);try{for(n.s();!(i=n.n()).done;){var r,o=i.value,l=a.solidDensity*o.size/1e6,h=Object(S["a"])(o.attacks);try{for(h.s();!(r=h.n()).done;){var c,u=r.value,d={attack:o.name+" "+u.name,_cellVariants:{}},m=Object(S["a"])(ne);try{for(m.s();!(c=m.n()).done;){var p=c.value;if(p.armor){var f=e.attack_score(u,a,p,o,l);d[p.name]=f,f>=7?d._cellVariants[p.name]="success":f<3&&(d._cellVariants[p.name]="danger")}}}catch(b){m.e(b)}finally{m.f()}s.push(d)}}catch(b){h.e(b)}finally{h.f()}}}catch(b){n.e(b)}finally{n.f()}t(s)})),null},defense:function(e,t){var a=this.mat;return ee.then((function(e){var i,s={},n=Object(S["a"])(se);try{for(n.s();!(i=n.n()).done;){var r,o=i.value,l=Object(S["a"])(ne);try{for(l.s();!(r=l.n()).done;){var h,c=r.value,u=c.solidDensity*o.size/1e3,d=Object(S["a"])(o.attacks);try{for(d.s();!(h=d.n()).done;){var m=h.value,p=o.name+" "+m.name,f=10-e.attack_score(m,c,a,o,u);s[p]=s[p]||{attack:p,_cellVariants:{}},s[p][c.name]=f,f>=8?s[p]._cellVariants[c.name]="success":f<2&&(s[p]._cellVariants[c.name]="danger")}}catch(_){d.e(_)}finally{d.f()}}}catch(_){l.e(_)}finally{l.f()}}}catch(_){n.e(_)}finally{n.f()}var b=[];for(var g in s)b.push(s[g]);t(b)})),null},values:function(){var e=[];e.push({name:this.mat.name,density:this.mat.solidDensity/1e3,impact_yield:this.mat.impactYield/1e6,blunt_defense:this.mat.impactFracture/1e6*2-this.mat.impactYield/1e6,edge_defense:this.mat.shearFracture/1e6,edge_attack:this.mat.shearFracture/1e6*this.mat.maxEdge/1e4});var t,a=Object(S["a"])(ne);try{for(a.s();!(t=a.n()).done;){var i=t.value;e.push({name:i.name,density:i.solidDensity/1e3,impact_yield:i.impactYield/1e6,blunt_defense:i.impactFracture/1e6*2-i.impactYield/1e6,edge_defense:i.shearFracture/1e6,edge_attack:i.shearFracture/1e6*i.maxEdge/1e4})}}catch(s){a.e(s)}finally{a.f()}return e}}},le=oe,he=Object(o["a"])(le,Z,X,!1,null,null,null),ce=he.exports,ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",[a("b-row",[a("b-col",[a("b-form-checkbox",{attrs:{"button-variant":e.running?"danger":"success",button:""},model:{value:e.running,callback:function(t){e.running=t},expression:"running"}},[e._v(e._s(e.running?"Stop":"Go"))])],1)],1),a("b-row",[a("b-col",[a("b-form-input",{attrs:{number:""},model:{value:e.temp_one,callback:function(t){e.temp_one=t},expression:"temp_one"}}),a("b-form-input",{attrs:{number:"",disabled:""},model:{value:e.specHeat,callback:function(t){e.specHeat=t},expression:"specHeat"}})],1),a("b-col",[a("b-form-input",{attrs:{number:""},model:{value:e.temp_two,callback:function(t){e.temp_two=t},expression:"temp_two"}}),a("b-form-input",{attrs:{number:"",placeholder:"SPEC_HEAT"},model:{value:e.other_spec_heat,callback:function(t){e.other_spec_heat=t},expression:"other_spec_heat"}})],1)],1)],1)},de=[],me={name:"HeatSim",props:{specHeat:Number},data:function(){return{temp_one:1e4,temp_two:1e4,running:!1,interval:null,other_spec_heat:null}},watch:{running:function(e){this.other_spec_heat||(this.other_spec_heat=this.specHeat);var t=this;clearInterval(this.interval),e&&(this.interval=setInterval((function(){return t.do_heat_transfer()}),10))}},methods:{do_heat_transfer:function(){var e=this.temp_two-this.temp_one;this.temp_two-=e/this.other_spec_heat,this.temp_one+=e/this.specHeat,Math.abs(e)<1&&(this.running=!1,this.other_spec_heat>this.specHeat?(this.temp_two=Math.round(this.temp_two),this.temp_one=this.temp_two):(this.temp_one=Math.round(this.temp_one),this.temp_two=this.temp_one))}}},pe=me,fe=Object(o["a"])(pe,ue,de,!1,null,null,null),be=fe.exports,ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("b-link",{attrs:{id:e.popoverID},on:{click:function(t){e.show=!e.show}}},[a("sup",[e._v("["+e._s(e.id)+"]")])]),a("b-popover",{attrs:{"custom-class":"citation",show:e.show,placement:"righttop",target:e.popoverID},on:{"update:show":function(t){e.show=t}}},[e._t("default")],2)],1)},_e=[],ve={props:{id:String},data:function(){return{show:!1}},computed:{popoverID:function(){return"citation-popover-"+this.id}}},ye=ve,we=Object(o["a"])(ye,ge,_e,!1,null,null,null),ke=we.exports;function xe(e){if(!e)return e;var t=0;if(Math.abs(e)>1){var a=0;while(Math.floor(e/Math.pow(10,a))==e/Math.pow(10,a))a++;return Math.floor(Math.log10(e))-(a-2)}t=0;while(Math.floor(e*Math.pow(10,t))!=e*Math.pow(10,t))t++;return t}function Te(e,t){var a=Math.pow(10,t-Math.floor(Math.log(e)/Math.LN10)-1);return Math.round(e*a)/a}function Ie(e){var t,a=-1/0,i=Object(S["a"])(e);try{for(i.s();!(t=i.n()).done;){var s=t.value;a=Math.max(xe(s),a)}}catch(n){i.e(n)}finally{i.f()}return a}function Se(e){var t,a="\\begin{bmatrix}\n",i=Object(S["a"])(e);try{for(i.s();!(t=i.n()).done;){var s,n=t.value,r=Object(S["a"])(n);try{for(r.s();!(s=r.n()).done;){var o=s.value;a+=o+" &"}}catch(l){r.e(l)}finally{r.f()}a=a.slice(0,-2)+"\\\\\n"}}catch(l){i.e(l)}finally{i.f()}return a.slice(0,-3)+"\n\\end{bmatrix}"}var Ae={components:{Elasticity:P,TemperatureInput:W,Token:K,CombatSims:ce,HeatSim:be,Citation:ke},name:"Helper",data:function(){return{name:"iron",adj:"iron",nameAdj:"iron",color:"GRAY",melting_exists:!0,boiling_exists:!0,ignition_exists:!0,colddam_exists:!0,heatdam_exists:!0,maxEdge:1e4,matValue:10,melting:11e3,boiling:12e3,heatdam:1e4,colddam:1e4,ignition:1e4,specHeat:450,solidDensity:5e3,liquidDensity:5e3,molarMass:55485,compressiveYield:1e5,compressiveFracture:1e5,shearYield:1e5,shearFracture:1e5,tensileYield:1e5,tensileFracture:1e5,elasticity:{bulk:17e4,young:211e3,shear:82e3},showResult:!1,realisticElasticity:!0,curTab:0,buttonText:"📋 Copy text",shouldShowAll:!1}},computed:{solidName:function(){return!this.melting_exists||this.melting<10032?"frozen "+this.name:this.name},liquidName:function(){return this.melting_exists&&this.melting>=10032?"molten "+this.name:this.name},gasName:function(){return this.boiling_exists&&this.boiling>=10032?"boiling "+this.name:this.name},solidAdj:function(){return this.melting_exists&&this.melting<10032?"frozen "+this.adj:this.adj},liquidAdj:function(){return this.melting>=10032?"molten "+this.adj:this.adj},gasAdj:function(){return this.boiling>=10032?"boiling "+this.adj:this.adj},impactYield:function(){return this.compressiveYield},impactFracture:function(){return this.compressiveFracture},impactElasticity:function(){return 100*this.impactYield/this.elasticity.bulk},compressiveElasticity:function(){return 100*this.compressiveYield/this.elasticity.bulk},tensileElasticity:function(){return 100*this.tensileYield/this.elasticity.young},shearElasticity:function(){return 100*this.shearYield/this.elasticity.shear},bendingYield:function(){return this.tensileYield},bendingFracture:function(){return this.tensileFracture},bendingElasticity:function(){return 100*this.bendingYield/this.elasticity.shear},showAll:function(){return this.shouldShowAll||this.curTab>=5},showGame:function(){return this.showAll||0==this.curTab},showThermal:function(){return this.showAll||1==this.curTab},showMass:function(){return this.showAll||2==this.curTab},showStrength:function(){return this.showAll||3==this.curTab||4==this.curTab},showName:function(){return this.showGame||this.showThermal},reasonableEdged:function(){return this.shearFracture>2e5},magmaSafe:function(){return!(this.melting_exists&&this.melting<12e3||this.boiling_exists&&this.boiling<12e3||this.heatdam_exists&&this.heatdam<12e3||this.ignition_exists&&this.ignition<12e3)},bluntDefense:function(){return 2*this.impactFracture-this.impactYield},speedOfSound:function(){return"\\sqrt{\\frac{K}{\\rho}} = "+Math.round(100*Math.sqrt(1e3*this.elasticity.bulk/this.solidDensity))/100+"\\frac{\\text{meters}}{\\text{second}}"},stiffness:function(){var e=Ie([this.elasticity.bulk,this.elasticity.shear]),t=Te(this.elasticity.bulk-2*this.elasticity.shear/3,e)/1e3,a=Te(t+2*this.elasticity.shear,e)/1e3,i=this.elasticity.shear/1e3;return Se([[a,t,t,0,0,0],[t,a,t,0,0,0],[t,t,a,0,0,0],[0,0,0,i,0,0],[0,0,0,0,i,0],[0,0,0,0,0,i]])+"\\text{GPa}"+Se([["\\epsilon_{11}"],["\\epsilon_{22}"],["\\epsilon_{33}"],["2\\epsilon_{23}"],["2\\epsilon_{13}"],["2\\epsilon_{12}"]])},toughness:function(){var e="\\int_{0}^{\\epsilon_f}\\sigma d\\epsilon =",t=this.tensileYield*this.tensileElasticity/2e5,a=(this.tensileFracture-this.tensileYield)*(this.tensileElasticity/1e5);return e+=Math.round(1e3*(t+a))+"\\frac{\\text{joules}}{\\text{meter}^3}",e},stressStrainCurve:function(){var e=100+Math.round(this.tensileYield/this.tensileFracture*400);return"M 100 300 L "+e+" 30 500 30"}},methods:{copyRaw:function(){var e=document.getElementById("result");window.getSelection().removeAllRanges(),window.getSelection().selectAllChildren(e),document.execCommand("copy"),window.getSelection().removeAllRanges()},strengthPlaceholders:function(){var e=this.tensileYield,t=2*e;this.tensileFracture=t,this.shearYield=e,this.shearFracture=t,this.compressiveYield=3.5*e,this.compressiveFracture=3.5*t},realisticPlaceholders:function(){var e=this.tensileYield,t=2*e,a=Math.sqrt(1/3);this.tensileFracture=t,this.shearYield=a*e,this.shearFracture=a*t,this.compressiveYield=3.5*e,this.compressiveFracture=3.5*t}}},Ee=Ae,De=Object(o["a"])(Ee,T,I,!1,null,null,null),Me=De.exports,Fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",[a("h1",[e._v("Is it a roguelike?")]),a("b-form-checkbox-group",{attrs:{stacked:"",options:e.options},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),e._v(" Your game is "+e._s(e.score)),a("br"),a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.help",modifiers:{help:!0}}],attrs:{variant:"info"}},[e._v("What do these mean")]),a("b-collapse",{attrs:{id:"help"}},[a("p",[e._v('"Heavy use of procedural generation": I personally wouldn\'t check this box unless the '),a("i",[e._v("maps")]),e._v(" are procgen. So, Borderlands 2 doesn't get this, despite the obviously Angband-like loot, but Diablo definitely does.")]),a("p",[e._v('"Highly tactical" means that the moment-to-moment gameplay is primarily to do with making the right choices. For example, Slay the Spire passes this easily by virtue of being a deckbuilder, and in fact almost all turn-based games will pass this, and even some non-turn-based games, such as FTL.')]),a("p",[e._v('"Requires technical skill": anti-correlated with "highly tactical", but not strictly so. There are games that will pass both, such as Noita or even The Binding of Isaac, depending on the character. FTL fails this because it\'s real-time-with-pause.')]),a("p",[e._v(' "Game flow organized around "floors" and/or "rooms"": this one\'s a bit hard to pin down, and one of the least valuable entries in this checklist. Basically, the gameplay\'s progression will likely appear to be a series of "setpieces" that are very similar run after run--Nethack has special rooms, FTL, Slay the Spire and The Binding of Isaac are all obviously room/floor-based, Tales of Maj\'Eyal is dungeon-to-dungeon but still passes this. Diablo does too, actually.')]),a("p",[e._v('"Death is a part of the game flow in a way that is not game over": if you make '),a("i",[e._v("actual game progress")]),e._v(" by dying, it fits this condition. Hades is my go-to example these days. Notably, a lot of games that are "),a("i",[e._v("very much not")]),e._v(" roguelikes fail this: The Elder Scrolls series, most platformers... really, it's hard to find games that "),a("i",[e._v("do")]),e._v(". Roguelites are, oddly, one of the places you see this the most. The least roguelike games I can think of that fit this are Dark Souls and those it inspired.")]),a("p",[e._v('"Character building with visible stats or abilities": could not be simpler. If you have a character sheet, you pass. If you have a talent tree, you probably pass. If you have a '),a("i",[e._v("deck")]),e._v(', you pass. FTL passes by virtue of having, yes, a character sheet. Noita passes by virtue of wands, HP and perks being all the "character building" there is, and you get to see all of that at all times.')]),a("p",[e._v('"Movement entirely on a grid": Berlin definition. Included for posterity. Does not affect score. I think it\'s irrelevant.')]),a("p",[e._v('"ASCII graphics as an option or default": Berlin definition. Included for posterity. Does not affect score. I think it\'s irrelevant. Dolphin emulator used to pass this. They removed the shader right as soon as graphics cards could run it (a 3090 just manages). Sad.')])])],1)},Ne=[],Le=(a("caad"),a("2532"),{procgen:3,tactical:2,twitchy:-3,rooms:1,permadeath:4,death_progression:-3,rpg_elements:1}),Oe={name:"Roguelike",data:function(){return{selected:["procgen","tactical","rooms","permadeath","rpg_elements","grid_based","ASCII"],options:[{text:"Heavy use of procedural generation",value:"procgen"},{text:"Highly tactical",value:"tactical"},{text:"Requires technical skill (dodging, twitch aiming etc.)",value:"twitchy"},{text:'Game flow organized around "floors" and/or "rooms"',value:"rooms"},{text:'Game has "runs" which end upon either death or victory',value:"permadeath"},{text:"Death is a part of the game flow in a way that is not game over",value:"death_progression"},{text:"Character building with visible stats or abilities",value:"rpg_elements"},{text:"Movement entirely on a grid",value:"grid_based"},{text:"ASCII graphics as an option or default",value:"ASCII"}]}},computed:{score:function(){var e,t=0,a=Object(S["a"])(this.selected);try{for(a.s();!(e=a.n()).done;){var i=e.value;t+=Le[i]||0}}catch(s){a.e(s)}finally{a.f()}return 11==t&&this.selected.includes("grid_based")&&this.selected.includes("ASCII")?"a classic(-style) roguelike":t>8?"roguelike":t>5?this.selected.includes("twitchy")?"a roguelite":"roguelike...like?":t>0?"maybe rogueish":"not roguelike"}}},je=Oe,Re=Object(o["a"])(je,Fe,Ne,!1,null,null,null),Ye=Re.exports,Ce=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-container",{staticClass:"article-text"},[i("h1",[e._v("WARNING: ROUGH DRAFT")]),i("h2",[e._v("Introduction")]),i("p",[e._v("Space Station 13 is a deeply complex social deduction game. Think Among Us crossed with Dwarf Fortress, although it should be noted that it's older than either"),i("sup",[i("citation",{attrs:{id:"1"}},[e._v("Yeah, older than Dwarf Fortress. That game's first release was 2006, SS13's was "),i("b-link",{attrs:{href:"https://secure.byond.com/games/Exadv1/SpaceStation13"}},[e._v("2003.")])],1)],1),e._v(". The game is primarily famous for being something of a freeform trolling engine—due to its open source nature and complex mechanics, a lot of features have been added to it over the years that allow for a lot of strange situations. Why is a wizard attacking a space station, and why do they only seem to know how to conjure guns, and why are they just giving the guns away?"),i("citation",{attrs:{id:"2"}},[e._v("Actually, I "),i("b-link",{attrs:{href:"https://gunshowcomic.com/30"}},[e._v("know this one.")])],1),e._v(" That sort of thing.")],1),i("p",[e._v("Simulation of gases usually involves solving a partial differential equation given initial conditions; since we're only talking diffusion, that would be the "),i("b-link",{attrs:{href:"https://en.wikipedia.org/wiki/Laplace_operator"}},[e._v("laplacian.")]),e._v(" I expect some basic knowledge of this in this article, but I'll try to include explanations here and there. I recommend "),i("b-link",{attrs:{href:"https://www.youtube.com/watch?v=p_di4Zn4wz4"}},[e._v("the 3blue1brown series on partial differential equations")]),e._v(", especially, and I'll link relevant bits as I go, because they're "),i("i",[e._v("seriously")]),e._v(" helpful for understanding. To summarize in simple terms: every point in space has a value, and that value changes over time towards the average of the values around it. There’s a variety of methods to solve this, and most of them rely on taking the initial conditions and transforming them some way or another into something that’s easier to compute.")],1),i("p",[e._v("However, we have a problem: the density at a given point can change arbitrarily, because this is a video game where unpredictable agents"),i("citation",{attrs:{id:"3"}},[e._v("(or “players” for short)")]),e._v(" can muck things up at any time. Therefore, instead of getting a solution to the equation, where we can just take f(x,y,t) and get a nice clean value, we have to simulate it every tick. So, how do we do this?")],1),i("h2",[e._v("The finite difference Method")]),i("p",[e._v("The trick is to divide the problem space up into a finite amount of chunks and then, each “tick”, calculate the changes cell-by-cell. "),i("b-embed",{attrs:{type:"video",aspect:"16by9","aria-label":"A sine wave is drawn on a graph as the phrase 'finite difference method' is drawn above it. Vertical lines appear separating the sine wave into regions, and then each individual region of the sine wave is turned into a line with the average value of that region.",controls:""}},[i("source",{attrs:{src:a("904d"),type:"video/mp4"}})]),e._v(" This is actually a solved problem."),i("citation",{attrs:{id:"4"}},[i("b-link",{attrs:{href:"https://www.researchgate.net/publication/2560062_Real-Time_Fluid_Dynamics_for_Games"}},[e._v('Stam, Jos. "Real-Time Fluid Dynamics for Games.”')])],1),e._v(" In essence, we take all the chunks, put them into a two-dimensional array,"),i("citation",{attrs:{id:"5"}},[e._v("Or what-have-you. It really, really depends, always does.")]),e._v(" and compare each member to its neighbors, changing how much gas they have based on the difference. Say you have 10 moles of gas in this center area. How much should there be next tick, in the surrounding ones? Well, let’s say the maximum amount diffuses every tick; since each tile can only have up to 4 cardinal neighboring tiles in 2D, let’s say 1/5 of the gas gets shared to each adjacent tile each tick. So, we do this calculation: first tile has 0 gas; second tile’s neighbor shares 1/5 of its gas, leading to this tile having 2 moles; 3rd has none; 4th is same as 2nd; fifth loses 1/5 of its gas to each neighboring tile, so it’s left with 2 moles; and so on.")],1),i("fdm-demonstration"),i("p",[e._v("It should be noted that this isn't actually doing all the calculations in-place--internally"),i("citation",{attrs:{id:"6"}},[i("b-link",{attrs:{href:"https://github.com/Putnam3145/putnam3145-github-io-wasm/blob/b188585bd22494fe31466c8c033b7d7b095d8c77/src/lib.rs#L179"}},[e._v("See here.")])],1),e._v(", it's making a copy by mapping a read-only version of the input."),i("citation",{attrs:{id:"7"}},[e._v("This is actually a lot like many lock-free data structures.")])],1),i("p",[e._v("This can get hard to follow for a human rather quickly, but a computer doesn't really see the difference between something simple and something very complicated.")]),i("h2",[e._v("LINDA")]),i("p",[e._v("SS13’s original implementation of this was in a file called FEA.dm, short for “finite element analysis”. People, naturally, started calling the system itself FEA. I am not familiar with FEA, in fact; I have only worked with LINDA, /tg/station’s own atmospheric system, which has the same DNA as the research paper above, but with a lot of caveats and changes in order to ensure performance.")]),i("p",[e._v("I should note at this point: the 2D representations so far is actually something of a lie. LINDA can work in arbitrary dimensions. However, most SS13 maps are 2D, at least atmospheric-wise.")]),i("p",[e._v("The most important innovation LINDA introduces is the ability to pause at any arbitrary time during simulation, deferring continued simulation until later. This technically doesn’t improve performance in the sense of CPU time taken to simulate—in fact, it makes it worse. What it does do, however, is make it so that the game can still run while atmospheric simulation takes place. This is an extremely important feature, and LINDA does it very well.")]),i("b-embed",{attrs:{type:"video",aspect:"16by9","aria-label":"A grid of cells with a dot in the bottom left corner is on screen. The dot's center shifts to blue, and then the surrounding cells flash. It moves one cell to the right, then the surrounding cells flash again, as a number in the top right counts down from 1. This continues until the number is below 0, at which point the dot turns brown.",controls:""}},[i("source",{attrs:{src:a("618d"),type:"video/mp4"}})]),i("p",[e._v("The second thing LINDA does is introduce excited groups. Due to diffusion being a very slow process in practice—it takes quadratic time to fill up a room, relative to the maximum distance from a given source—it keeps track of groups, which merge together and cool down via criteria established later. Once cooled down, a group will equalize all gas in its region, and eventually destroy itself.")]),i("b-embed",{attrs:{type:"video",aspect:"16by9","aria-label":"We start with a grid of cells, all brown. One cell turns blue, then the cells adjacent to it, then the cells adjacent to those, then the rest of the grid.",controls:""}},[i("source",{attrs:{src:a("0998"),type:"video/mp4"}})]),i("p",[e._v("The third thing it does is simply not simulate tiles that aren’t sufficiently different from the surroundings. This requires a lot of bookkeeping, and relies on anything adding new gases to be good and report that it’s doing so. However, it does work, and very well.")]),i("b-embed",{attrs:{type:"video",aspect:"16by9","aria-label":"A grid of numbers is drawn on screen, randomly assigned from 9 to 11. The numbers are then all colored blue and brown; the only blue numbers are numbers which have at least one adjacent number that is not the same. The blue numbers are then highlighted.",controls:""}},[i("source",{attrs:{src:a("902d"),type:"video/mp4"}})]),i("p",[e._v("But then the question arises: how does a system stay consistent while doing these? After all, the original system relied on "),i("i",[e._v("copying")]),e._v(" the array.")]),i("p",[e._v("Zeroth thing: whenever certain changes to the gas are made, it’s archived, and saves last time it was archived. This archive is the most important thing to ensure consistency—the second array that the dedicated system uses is, essentially, encoded in the gas mixture itself.")]),i("p",[e._v("Before any tiles are processed, at the start of the processing step, it copies the active turfs list, to make sure we don’t work on the same turf twice, or miss one because something removed it from active for spurious reasons. Once this copy happens, it goes through the queue, taking a turf, removing it from the queue, then processing it. The process goes as follows.")]),i("p",{staticStyle:{"text-align":"center"}},[i("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.math-dropdown",modifiers:{"math-dropdown":!0}}],attrs:{variant:"info"}},[e._v("Math terms definitions")]),i("b-collapse",{attrs:{id:"math-dropdown"}},[i("katex-element",{attrs:{"display-mode":"",expression:"\n            \\begin{align*}\n            G&: \\text{The total number of gas types; equivalently, the set of all gas types.}\\\\\n            g_i&: \\text{The ith gas of mixture g. Gas mixtures are represented by lower-case letters.}\\\\\n            g_{ia}&: \\text{ith archived gas mixture.}\\\\\n            g_T&: \\text{The temperature of mixture g.}\\\\\n            \\forall n \\in G&: \\text{For all gas types.}\\\\\n            g_{tot}&: \\sum_{n \\in G}g_n \\\\\n            c_n&: \\text{The heat capacity for gas } n \\in G\\\\\n            g_Q&: \\text{The total heat of a gas (calculated by } \\sum_{n \\in G}g_nc_n \\text{)}\\\\\n            \\text{Merging gases}&:g + g \\rightarrow g\\\\\n            \\text{Scalar multiplication:}&:g \\cdot \\R \\rightarrow g\\\\\n            &\\text{The above two do basically what you'd expect for, say, vector addition, with the added wrinkle of }\\\\\n            &\\text{heat capacities.}\n            \\end{align*}"}})],1)],1),i("p",[e._v("First, we check if it’s been archived this tick; if it hasn’t, we do that immediately. Second, we go through each adjacent tile. For each adjacent tile, we first check if that tile’s already been processed; if it has, we skip it. Otherwise, we archive it (we know this is consistent due to the fact that we skip!), then compare our excited groups. If we have different excited groups, we merge them. If the other tile isn’t in an excited group at all, we compare our gas to the other’s gas, and if it’s different, we add the other gas to the active processing list, then either add it to our excited group, add us to their excited group, or make a new one and add both to it. Then: "),i("code-math-prose",{attrs:{expression:"\\begin{align*} \\forall n \\in G&: \\\\\n        \\Delta_n &:= \\frac{a_{na}-b_{na}}{|N|+1}\\\\\n        a_n &:= a_{na} - \\Delta_n\\\\\n        b_n &:= b_{na} + \\Delta_n\n        \\end{align*}",code:"\nfor gas in gases {\n    let delta = (self.get_gas_archived(gas) - sharer.get_gas_archived(gas)) \n                / neighbors.count();\n    self.adjust_gas(gas, -delta);\n    sharer.adjust_gas(gas, delta);\n    //some stuff with heat capacities, too, but this is the gist of it\n}"}},[e._v(" For each gas, we get the difference in the gas amounts in each gas's archive, then divide by the number of adjacent tiles; then, we add the difference to the other turf, and subtract the difference from our turf. ")]),e._v(' Note that "neighbors" here might include a possible special “planetary atmos” fake tile that represents the average gas composition of a planet. Then, we do a temperature share, which is the same applied to heat: '),i("code-math-prose",{attrs:{expression:"\\begin{align*} \\Delta T &:= a_{Ta}-b_{Ta}\\\\\n        \\Delta Q &:= 0.4\\Delta T \\frac{a_{Qa}b_{Qa}}{a_{Qa}+b_{Qa}}\\\\\n        a_T &:= a_{Ta} - \\frac{\\Delta Q}{a_Q} \\\\\n        b_T &:= b_{Ta} + \\frac{\\Delta Q}{b_Q}\n        \\end{align*}",code:"\nlet temperature_delta = \n    self.temperature_archived - sharer.temperature_archived;\nlet self_heat_capacity = self.heat_capacity_archived();\nlet sharer_heat_capacity = sharer.heat_capacity_archived();\nlet heat = 0.4 * temperature_delta\n    * (self_heat_capacity * sharer_heat_capacity\n    / (self_heat_capacity + sharer_heat_capacity));\nself.temperature = \n    self.temperature_archived - heat / self_heat_capacity);\nsharer.temperature = \n    sharer.temperature_archived + heat / sharer_heat_capacity;\n}\n"}},[e._v(" First, we calculate the difference in temperatures. Using this, we then calculate the heat difference via some basic dimensional analysis (you don't have to think about it too hard, in other words) and exchange heat that way. We multiply the heat exchange by the conduction coefficient, which in this case is 0.4. ")]),e._v(" After this, we finally set the tile and all of its neighbors’ last_share value to the current tick, ensuring that this tile won’t be shared again this tick, and we reset the cooldowns on its excited groups.")],1),i("p",[e._v("Now that the tile is done processing, we check if we’ve been processing gases too long, relative to maximum length of the tick; if we have, we pause the subsystem, letting the rest of the game run, to resume the queue later.")]),i("p",[e._v("This is LINDA, and it works quite well. But it is slow. Not just in terms of gases spreading; it’s computationally very slow, as well. So, how do we make this faster?")]),i("p",[e._v("Well... we don't. BYOND is not a fast engine. As long as we have to write the processing in byond, this is just about as good as it gets, unless you switch to totally different systems like ZAS, which has area-based atmospherics instead of turf-based.")]),i("p",[e._v("But what if we don't have to write the processing in byond?")]),i("h2",[e._v("Extools")]),i("p",[e._v("In comes "),i("b-link",{attrs:{href:"https://github.com/MCHSL/extools"}},[e._v("extools")]),e._v(", a tool that can be used to interface directly with BYOND memory using C++. Initially, LINDA (and, in fact, all gas mixture processing) was ported to C++ by monster860. I ported this to Citadel station. However, I then wanted to add new gases, and found that it had some odd architecture choices: the max amount of gases was hardcoded, and gas mixtures used C-style arrays to store them; not only that, but gas mixtures were created by allocating one in an "),i("code",[e._v("std::shared_ptr")]),e._v(", then storing the pointer as a float (by casting it bitwise, so this was safe).")],1),i("p",[e._v("I decided this should be rectified. I switched all of the gas mixture code to more modern C++ constructions, making gas mixtures stored in a vector and using the STL instead of "),i("code",[e._v("memcpy")]),e._v(" and such. Most importantly, I switched the raw pointer saving with a simple vector that saves deallocated gas mixture locations"),i("citation",{attrs:{id:"8"}},[e._v("This turns out to essentially be "),i("b-link",{attrs:{href:"https://en.wikipedia.org/wiki/Region-based_memory_management"}},[e._v("region-based memory management.")])],1),e._v(" This made the whole thing something like 3-4 times as fast, probably primarily due to cache locality"),i("citation",{attrs:{id:"9"}},[e._v("So easy to blame the cache locality.")]),e._v(", though auto-vectorization did help. At this point, everything seemed good... until I couldn’t update atmos anymore without causing lavaland, the planetary mining zone in TGstation servers, to explode, usually instantly, with baffling floating point errors.")],1),i("h2",[e._v("Auxtools")]),i("p",[e._v("This was a problem for a while. Soon, however, "),i("b-link",{attrs:{href:"https://github.com/willox/auxtools"}},[e._v("auxtools")]),e._v(" came about: a Rust-based successor to extools. With this, I immediately began working on “"),i("b-link",{attrs:{href:"https://github.com/Putnam3145/auxmos"}},[e._v("auxmos")]),e._v("”, a Rust implementation of atmospherics. Note that I said "),i("i",[e._v("atmospherics")]),e._v(": this is no longer LINDA. Instead, I implemented an entirely new system, based on the paper mentioned before (it comes up a lot!). Here’s how the new system works.")],1),i("p",[i("code-math-prose",{attrs:{expression:"\\begin{align*} \\text{With }N&: \\text{neighbor gases of tile } t\\\\\n                    m&: \\frac{1}{8}\\sum_{o \\in N}o\\end{align*}",code:"\nlet m = GasMixture::new();\nfor neighbor in t.neighbors {\n    m.merge(neighbor.gas);\n}\nm.multiply(0.125);\n"}},[e._v(" Take gases from all of neighbor turfs, add them together, then multiply it by 1/8. ")]),e._v(" As we do this, we also do the following check: "),i("code-math-prose",{attrs:{expression:"\\begin{align*}\n        \\exist o \\in& N:\\\\\n        &|t_T - o_T| > 4 \\land \\\\\n        &t_{tot} \\ge 0.1 \\lor \\\\\n        &\\exists n \\in G: |t_n-b_n| > 0.1\n        \\end{align*}",code:"\nt.neighbors.any(|neighbor| {\n  (t.temperature - t.temperature).abs() > 4 \n    && t.total_moles() > 0.1\n    || all_gases.any(\n      |gas| (t.get_gas(gas) - neighbor.get_gas(gas)).abs() > 0.1\n    )\n})\n"}},[e._v(" If the gases are of different enough temperature and our gas has enough moles for this to matter, pass; otherwise, pass if any individual gas is more than 0.1 moles away from the neighbor's gas. ")]),e._v(" If this statement is true, then we'll keep "),i("katex-element",{attrs:{expression:"m"}}),e._v(" around for later, associated with the gas ID of "),i("katex-element",{attrs:{expression:"t"}}),e._v(". Once every single turf is processed this way, we go through all of the turfs that passed the condition earlier, setting their gas mixtures:"),i("code-math-prose",{attrs:{expression:"t := m + t \\cdot 1-\\frac{|N|}{8}",code:"\nt.multiply(1 - (neighbors.count()/8))\nt.merge(m)\n"}},[e._v(" Take our turf's gas mixture, multiply it by one minus the number of neighbor turfs divided by 8, then merge it with the gas mixture from earlier, "),i("katex-element",{attrs:{expression:"m"}}),e._v(". ")],1),e._v("And thus we have diffused, just as LINDA does.")],1),i("h2",[e._v("Why do things this way?")]),i("p",[e._v("Why "),i("katex-element",{attrs:{expression:"\\frac{1}{8}"}}),e._v(", instead of "),i("katex-element",{attrs:{expression:"\\frac{1}{|N|+1}"}}),e._v("? I have a few reasons. First of all, it makes the math easier to follow; if you always know gases lose exactly 1/8 of their gas per adjacent turf per tick, noticing problems is much easier. This is not a hypothetical--I had a long-running race condition solved by doing the math in my head and realizing exactly what happened. Second, "),i("katex-element",{attrs:{expression:"\\frac{F}{8}"}}),e._v(" always retains its exact precision in floats--precision issues are nasty to deal with, and while the error is never going to be big, it adds up over hours of doing these operations twice a second. Third, "),i("katex-element",{attrs:{expression:"8 \\ge |N|+1"}}),e._v("—the largest "),i("katex-element",{attrs:{expression:"|N|+1"}}),e._v(" can be in practical terms is, in fact, 8, for turfs with 6 neighbors that are on a planet. LINDA used to also have some sort of particle that makes turfs adjacent atmos-wise, but losing that is acceptable, to my eyes")],1),i("p",[e._v("Second of all, why wait until we've checked every turf?? Simply put, the fact that we create every to-merge gas mix first means that we have an archive built-in—during calculations, not a single gas mixture is modified—all modifications come in the merging step, after we’ve already calculated all of them… and, even better, we can parallelize this step, to, because each step is completely independent of all the rest.")]),i("p",[e._v("But wait, you may ask, wouldn’t this cause lag, due to the fact that it’s both increasing the total workload by never pausing turfs and the fact that it never pauses to let the game run? The answer is no, albeit only because the entire thing is highly parallelizable. Each individual gas mixture can, in theory, be done completely independently from the others, with only some read-sharing involved. In practice, I use a parallel library called DashMap combined with rayon to run each individual “shard” of the DashMap in parallel, which leads to a pretty much linear speedup with number of cores. On top of that, the entire process is started on another core, meaning that the game experiences no interruption as it runs—in fact, the game starts the thread, does a bunch of processing relating to atmos that isn’t on tiles while the thread is running, then waits for the thread to finish if it hasn’t yet before doing turf operations. In practice, it usually finishes far before it gets to that point, meaning that, as far as the player knows, this entire process causes zero performance impact.")]),i("p",[e._v("There’s a few more reasons: doing everything at once requires less bookkeeping, and is thus simpler; the archive no longer being required means there’s less memory being allocated, which improves performance, and gives more breathing room, since SS13 is still 32-bit; copy-and-multiply is a far simpler operation than going through each individual gas and doing calculations on them, and can be vectorized by the compiler; and quite a few others.")]),i("h2",[e._v("Why write this?")]),i("p",[e._v("This is all an open source project. I'm hoping that I won't be the only person on the planet who understands it well enough to work on it "),i("i",[e._v("and")]),e._v(" cares enough to actually do it. By writing this, I want either people who care to learn how to work on it or people who can work on it to start caring. I don't mind working on these things, I enjoy it greatly"),i("citation",{attrs:{id:"citation needed"}},[e._v("Actually, no, a "),i("b-link",{attrs:{href:"https://en.wikipedia.org/wiki/Cessna_Citation_family"}},[e._v("private jet")]),e._v(" would be unethical, huh?")],1),e._v(", but the "),i("b-link",{attrs:{href:"https://en.wikipedia.org/wiki/Bus_factor"}},[e._v("bus factor")]),e._v(" is a terrifying thing, and I hope to reduce it. Please consider "),i("b-link",{attrs:{href:"https://github.com/Putnam3145/auxmos"}},[e._v("contributing to Auxmos")]),e._v(", even if it's providing insights I might not have thought of (this happens more often than you'd think).")],1)],1)},Pe=[],He=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",[a("b-row",{attrs:{"no-gutters":""}},[a("b-col",[a("b-card",{attrs:{header:"Definition"}},[a("katex-element",{attrs:{"display-mode":"",expression:e.expression}})],1)],1),a("b-col",[a("b-card",{attrs:{header:"Code"}},[a("highlightjs",{attrs:{autodetect:"",code:e.code}})],1)],1),a("b-col",[a("b-card",{attrs:{header:"Words"}},[e._t("default")],2)],1)],1)],1)},qe=[],Ge={props:{expression:String,code:String}},Be=Ge,ze=Object(o["a"])(Be,He,qe,!1,null,null,null),We=ze.exports,Ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"text-align":"center"}},[a("katex-element",{attrs:{"display-mode":"",expression:e.displayArray}}),a("b-button",{attrs:{variant:"success"},on:{click:e.do_fdm}},[e._v("Run once")])],1)},Ve=[],$e=(a("d81d"),a("a630"),a("20bf"),a("4a9b"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a.e("chunk-76fd9eda").then(a.bind(null,"675b"))),Qe=8,Je={data:function(){return{array:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]}},mounted:function(){this.array=Array.from(Array(Qe*Qe)).map((function(e,t){return t}))},computed:{displayArray:function(){var e,t="\\begin{matrix}",a=0,i=Object(S["a"])(this.array);try{for(i.s();!(e=i.n()).done;){var s=e.value;a=(a+1)%Qe,t+=Math.round(100*s)/100,t+=0==a?"\\\\":" & "}}catch(n){i.e(n)}finally{i.f()}return t+"\\end{matrix}"}},methods:{do_fdm:function(){var e=this;return $e.then((function(t){e.array=t.fdm(Float64Array.from(e.array),Qe)})),null}}},Ke=Je,Ze=Object(o["a"])(Ke,Ue,Ve,!1,null,null,null),Xe=Ze.exports,et={components:{Citation:ke,CodeMathProse:We,fdmDemonstration:Xe}},tt=et,at=Object(o["a"])(tt,Ce,Pe,!1,null,null,null),it=at.exports;i["default"].use(u["a"]);var st=[{path:"/",name:"Home",component:x},{path:"/helper",name:"Dwarf Fortress material helper",component:Me},{path:"/about",name:"About",component:function(){return a.e("about").then(a.bind(null,"f820"))}},{path:"/roguelike",name:"Roguelike",component:Ye},{path:"/atmospherics",name:"Atmospherics",component:it}],nt=new u["a"]({mode:"history",base:"/",routes:st}),rt=nt,ot=a("bfc7"),lt=a("1020"),ht=a.n(lt),ct=a("2ce7"),ut=a.n(ct),dt=a("4626");i["default"].use(ot["a"],{globalOptions:{}}),ht.a.registerLanguage("rust",ut.a),i["default"].use(dt["a"]),i["default"].config.productionTip=!1,new i["default"]({router:rt,render:function(e){return e(c)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";a("9c0c")},"618d":function(e,t,a){e.exports=a.p+"media/LINDA.eea20324.mp4"},"902d":function(e,t,a){e.exports=a.p+"media/Optimize.08296f0c.mp4"},"904d":function(e,t,a){e.exports=a.p+"media/FiniteDifference3.5a0e264f.mp4"},"9c0c":function(e,t,a){}});
//# sourceMappingURL=app.146953ad.js.map