<!DOCTYPE html>
<html>
<head>
<title>DF Material Helper</title>
</head>
<body>
Good sources for data on materials are:<br><br>
<a href="http://www.matweb.com/index.aspx">Matweb</a><br>
<a href="http://www.wolframalpha.com/">Wolfram Alpha</a><br>
<a href="https://en.wikipedia.org/wiki/Main_Page">Wikipedia</a><br>
<a href="http://www.webelements.com/">WebElements</a><br>
<a href="http://dwarffortresswiki.org/index.php/Main_Page">Dwarf fortress wiki (for DF-specific values)</a><br><br>
If any properties are unavailable the game will use placeholders. However, if those properties happen to be one of the last four (strength or stress/strain), it would be best to include a placeholder value equal to that of the "nearest" material you can find; for example, if you were not able to find the Young's modulus of Iron, using Cobalt would do just fine. Some data will automatically fill out even though better data may be available; this is primarily for ease of use and can be safely ignored if all data is available. This is unlikely, however, and the placeholders will do just fine (all the vanilla materials use the same ones).<br><br>

Materials in dwarf fortress are made with the assumption that IMPACT values should be equal to COMPRESSIVE, which is incorrect; YIELD and FRACTURE should be equal to BENDING or COMPRESSIVE, whichever's less (which is always BENDING in vanilla DF). However, forcing this on whoever makes the materials would be dumb, since it is the game that we're talking about. So: <br><br>

Realistic: <input type="checkbox" id="realistic" onChange="makeMat()"> <br><br>

Material name: <input type="text" id="mat_name" placeholder="iron" oninput="makeMat()"> Should have no capitals <br>
Melting point (celcius): <input type="number" id="melting_c" placeholder="1538" oninput="celciusConversion('melting')"><br>
Boiling point (celcius): <input type="number" id="boiling_c" placeholder="2862" oninput="celciusConversion('boiling')"><br>
Melting point (fahrenheit): <input type="number" id="melting" placeholder="2800" oninput="fahrenheitConversion('melting')"><br>
Boiling point (fahrenheit): <input type="number" id="boiling" placeholder="5184" oninput="fahrenheitConversion('boiling')"><br>
Specific heat: <input type="number" id="spec_heat" placeholder="450" oninput="makeMat()"> Joules per kilokelvin (J/K * 1000)<br>
Color: <input type="text" id="color" placeholder="SILVER" oninput="makeMat()"> DF colors <br>
Value: <input type="number" id="mat_value" placeholder="10" oninput="makeMat()"> DF value; 30 is steel.<br>
Solid density: <input type="number" id="solid_density" placeholder="7850" oninput="makeMat()"> kg/m<sup>3</sup><br>
Liquid density: <input type="number" id="liquid_density" placeholder="6980" oninput="makeMat()">kg/m<sup>3</sup><br>
Molar mass: <input type="number" id="molar" placeholder="55845" oninput="makeMat()"> kg/mole<br>
Tensile yield strength: <input type="number" id="tensile_yield" placeholder="155000" oninput="tensileYield()"> KPa<br>
Ultimate tensile strength: <input type="number" id="ultimate_tensile" placeholder="310000" oninput="makeMat()"> KPa<br>
Shear yield strength: <input type="number" id="shear_yield" placeholder="248000" oninput="makeMat()"> KPa<br>
Ultimate shear strength: <input type="number" id="ultimate_shear" placeholder="496000" oninput="makeMat()"> KPa<br>
Compressive yield strength: <input type="number" id="compressive_yield" placeholder="620000" oninput="makeMat()"> KPa<br>
Ultimate compressive strength: <input type="number" id="ultimate_compressive" placeholder="1240000" oninput="makeMat()"> KPa<br>
Young's modulus: <input type="number" id="young" placeholder="211000" oninput="makeMat()"> MPa<br>
Shear modulus: <input type="number" id="shear" placeholder="82000" oninput="makeMat()"> MPa<br>
Bulk modulus: <input type="number" id="bulk" placeholder="170000" oninput="makeMat()"> MPa<br>

<pre id='result'></pre>

<script>
function getValue(id) {
    var curValue=document.getElementById(id).value
    return parseInt(curValue) ? parseInt(curValue) : curValue
}

function setValue(id,value) {
    document.getElementById(id).value=value
    return id
}

function celciusConversion(nameOfThing) {
    var celcius=getValue(nameOfThing+"_c")
    var fahrenheit=Math.round((1.8*celcius)+32)
    setValue(nameOfThing,fahrenheit)
    makeMat()
}
function fahrenheitConversion(nameOfThing) {
    var fahrenheit=getValue(nameOfThing)
    setValue(nameOfThing+'_c',Math.round((5*(fahrenheit-32))/9))
    makeMat()
}

function tensileYield() {
    var yield=getValue('tensile_yield')
    setValue('shear_yield',yield)
    setValue('compressive_yield',yield*3.5)
    setValue('ultimate_tensile',yield*2)
    setValue('ultimate_shear',yield*2)
    setValue('ultimate_compressive',yield*7)
    makeMat()
}

function tempName(state) {
    switch(state) {
        case 'solid':
            if (getValue('melting')<64) {
                return 'frozen '+getValue('mat_name')
            } else {
                return getValue('mat_name')
            }
            break;
        case 'liquid':
            if (getValue('melting')>64) {
                return 'molten '+getValue('mat_name')
            } else {
                return getValue('mat_name')
            }
            break;
        case 'gas':
            if (getValue('boiling')>64) {
                return 'boiling '+getValue('mat_name')
            } else {
                return getValue('mat_name')
            }
            break;
        default:
            break;
    }
}
function makeMat() {
    var young=Math.round(getValue('tensile_yield')*100/(getValue('young')))
    var bulk=Math.round((100*getValue('compressive_yield'))/(getValue('bulk')))
    var shear=Math.round((100*getValue('shear_yield'))/(getValue('shear')))
    var tensileYield=getValue('tensile_yield')
    var compressiveYield=getValue('compressive_yield')
    var shearYield=getValue('shear_yield')
    var ultimateTensile=getValue('ultimate_tensile')
    var ultimateCompressive=getValue('ultimate_compressive')
    var ultimateShear=getValue('ultimate_shear')
    var impactYield=document.getElementById('realistic').checked ? Math.min(tensileYield,compressiveYield) : compressiveYield
    var impactFracture=document.getElementById('realistic').checked ? Math.min(ultimateTensile,ultimateCompressive) : ultimateCompressive
    var bendingYield=Math.min(tensileYield,compressiveYield,shearYield)
    var bendingFracture=Math.min(ultimateTensile,ultimateCompressive,ultimateShear)
    var torsionYield=shearYield<0.5*impactYield ? shearYield : impactYield //wikipedia is confusing... and unsourced.
    var torsionFracture=ultimateShear<0.5*impactFracture ? ultimateShear : impactFracture
    var holyCrapABigString="    [STATE_NAME_ADJ:ALL_SOLID:"+tempName('solid')+"]\n" + //would you believe that this whole segment was copied from python and only minorly edited?
                "    [STATE_NAME_ADJ:LIQUID:"+tempName('liquid')+"]\n" + 
                "    [STATE_NAME_ADJ:GAS:"+tempName('gas')+"]\n" +
                "    [DISPLAY_COLOR:0:7:1]\n" +
                "    [BUILD_COLOR:0:7:1]\n" +
                "    [MATERIAL_VALUE:"+getValue('mat_value')+"]\n" +
                "    [SPEC_HEAT:"+getValue('spec_heat')+"]\n" +
                "    [MELTING_POINT:"+(getValue('melting')+9968)+"]\n" +
                "    [BOILING_POINT:"+(getValue('boiling')+9968)+"]\n" +
                "    [SOLID_DENSITY:"+getValue('solid_density')+"]\n" +
                "    [LIQUID_DENSITY:"+getValue('liquid_density')+"]\n" +
                "    [MOLAR_MASS:"+getValue('molar')+"]\n" +
                "    [IMPACT_YIELD:"+impactYield+"]\n" +
	            "    [IMPACT_FRACTURE:"+impactFracture+"]\n" +
	            "    [IMPACT_STRAIN_AT_YIELD:"+bulk+"]\n" +
	            "    [COMPRESSIVE_YIELD:"+compressiveYield+"]\n" +
	            "    [COMPRESSIVE_FRACTURE:"+ultimateCompressive+"]\n" +
	            "    [COMPRESSIVE_STRAIN_AT_YIELD:"+bulk+"] bulk modulus "+ getValue('bulk')/1000 + " GPa\n" +
	            "    [TENSILE_YIELD:"+tensileYield+"]\n" +
	            "    [TENSILE_FRACTURE:"+ultimateTensile+"]\n" +
	            "    [TENSILE_STRAIN_AT_YIELD:"+young+"] young's modulus "+ getValue('young')/1000 + " GPa\n" +
	            "    [TORSION_YIELD:"+torsionYield+"]\n" +
	            "    [TORSION_FRACTURE:"+torsionFracture+"]\n" +
                "    [TORSION_STRAIN_AT_YIELD:"+shear+"]\n" +
	            "    [SHEAR_YIELD:"+shearYield+"]\n" +
	            "    [SHEAR_FRACTURE:"+ultimateShear+"]\n" +
	            "    [SHEAR_STRAIN_AT_YIELD:"+shear+"] shear modulus " +getValue('shear')/1000+ " GPa\n" +
	            "    [BENDING_YIELD:"+bendingYield+"]\n" +
	            "    [BENDING_FRACTURE:"+bendingFracture+"]\n" +
	            "    [BENDING_STRAIN_AT_YIELD:"+shear+"]\n" +
	            "    [MAX_EDGE:10000]\n" +
                "    [STATE_COLOR:ALL:"+getValue('color')+"]"
    document.getElementById('result').innerHTML=holyCrapABigString
}
</script>

</body>
</html